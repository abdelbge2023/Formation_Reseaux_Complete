<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plateforme P√©dagogique VLSM Compl√®te</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #2E7D32;
            --secondary: #1565C0;
            --accent: #FF6D00;
            --warning: #D32F2F;
            --success: #388E3C;
            --info: #0277BD;
            --dark: #263238;
            --light: #F5F5F5;
            --border: #BDBDBD;
            --cisco: #049FD9;
            --hp: #0096D6;
            --theory: #7B1FA2;
            --lab: #FF9800;
            --network-bit: #2E7D32;
            --subnet-bit: #1565C0;
            --host-bit: #FF6D00;
            --bit-1: #4CAF50;
            --bit-0: #E0E0E0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, #1B5E20 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%);
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0.5rem;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .nav-tab:hover {
            background: var(--light);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
        }

        .tab-content {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .learning-objective {
            background: linear-gradient(135deg, #FFEAA7 0%, #FFD43B 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--accent);
        }

        .concept-explanation {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--info);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-group input, .input-group select {
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1B5E20;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #0D47A1;
            transform: translateY(-2px);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        /* Styles pour les explications binaires */
        .binary-explanation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .subnet-analysis {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--info);
        }

        .bits-container {
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            justify-content: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .bit {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.8rem;
            position: relative;
            transition: all 0.3s ease;
            cursor: help;
        }

        .bit:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .bit-network {
            background: var(--network-bit);
            color: white;
        }

        .bit-subnet {
            background: var(--subnet-bit);
            color: white;
        }

        .bit-host {
            background: var(--host-bit);
            color: white;
        }

        .bit-1 {
            background: var(--bit-1);
            color: white;
        }

        .bit-0 {
            background: var(--bit-0);
            color: #666;
        }

        .bit-separator {
            width: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255,255,255,0.5);
            font-weight: bold;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .calculation-steps {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary);
        }

        .calculation-step {
            margin-bottom: 1rem;
            padding: 1rem;
            background: var(--light);
            border-radius: 8px;
            border-left: 4px solid var(--info);
        }

        .step-title {
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .step-content {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 1rem;
            border-radius: 5px;
            margin: 0.5rem 0;
            border: 1px solid var(--border);
        }

        .binary-transformation {
            background: #1e1e1e;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .exercise-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid var(--lab);
            transition: transform 0.3s ease;
        }

        .exercise-card:hover {
            transform: translateY(-5px);
        }

        .difficulty-badge {
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .difficulty-easy {
            background: #C8E6C9;
            color: #2E7D32;
        }

        .difficulty-medium {
            background: #FFF9C4;
            color: #F57F17;
        }

        .difficulty-hard {
            background: #FFCDD2;
            color: #C62828;
        }

        .router-lab {
            background: linear-gradient(135deg, #FFEAA7 0%, #FFD43B 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .config-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .config-tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.3);
            border: none;
            border-radius: 8px;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .config-tab.active {
            background: rgba(255,255,255,0.6);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .config-content {
            background: rgba(255,255,255,0.3);
            padding: 1.5rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .config-code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .config-comment {
            color: #6A9955;
        }

        .config-keyword {
            color: #569CD6;
        }

        .config-string {
            color: #CE9178;
        }

        .config-number {
            color: #B5CEA8;
        }

        .table-responsive {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
        }

        tr:hover {
            background: #f8f9fa;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid var(--primary);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            color: var(--dark);
            font-size: 0.9rem;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .tip-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .quiz-container {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quiz-option {
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: var(--light);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: #E8F5E8;
        }

        .quiz-option.incorrect {
            border-color: var(--warning);
            background: #FFEBEE;
        }

        .complex-example {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .scenario-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid var(--info);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .comparison-table th, .comparison-table td {
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--border);
        }

        .comparison-table th {
            background: var(--light);
        }

        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .methodology-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid var(--secondary);
        }

        .practice-scenario {
            background: linear-gradient(135deg, #FFEAA7 0%, #D4FC79 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .interactive-tool {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        .cheatsheet {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--accent);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 300px;
            background: var(--dark);
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 1rem;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            font-weight: normal;
            line-height: 1.4;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>üéì Plateforme P√©dagogique VLSM Compl√®te</h1>
                <p class="subtitle">Ma√Ætrisez le sous-r√©seautage IP variable gr√¢ce √† des explications d√©taill√©es, des exemples complexes et des exercices pratiques</p>
                <div>
                    <span class="badge">üìö Niveau: D√©butant √† Expert</span>
                    <span class="badge">‚è±Ô∏è Dur√©e: 3-6 heures</span>
                    <span class="badge">üéØ Objectif: Ma√Ætriser le VLSM en profondeur</span>
                </div>
            </div>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('theory')">
                üìö Th√©orie Approfondie
            </button>
            <button class="nav-tab" onclick="showTab('methodology')">
                üõ†Ô∏è M√©thodologie
            </button>
            <button class="nav-tab" onclick="showTab('binary')">
                üî¢ Vue Binaire
            </button>
            <button class="nav-tab" onclick="showTab('lab')">
                üî¨ Laboratoire
            </button>
            <button class="nav-tab" onclick="showTab('calculation')">
                üßÆ Calcul VLSM
            </button>
            <button class="nav-tab" onclick="showTab('practice')">
                üí™ Pratique Intensive
            </button>
            <button class="nav-tab" onclick="showTab('routing')">
                üö¶ Routage
            </button>
            <button class="nav-tab" onclick="showTab('quiz')">
                ‚úÖ √âvaluation
            </button>
        </nav>

        <!-- Section Th√©orie Approfondie -->
        <section id="theory" class="tab-content active">
            <h2>üìö Fondamentaux du VLSM - Approfondissement</h2>
            
            <div class="learning-objective">
                <h3>üéØ Objectifs d'Apprentissage</h3>
                <p>√Ä la fin de cette section, vous serez capable de:</p>
                <ul>
                    <li>Comprendre la diff√©rence entre sous-r√©seautage classique et VLSM</li>
                    <li>Convertir des adresses IP entre notation d√©cimale et binaire</li>
                    <li>Calculer des masques de sous-r√©seau variables</li>
                    <li>Optimiser l'allocation d'adresses IP</li>
                    <li>R√©soudre des probl√®mes complexes de sous-r√©seautage</li>
                </ul>
            </div>

            <div class="concept-explanation">
                <h3>üîç Qu'est-ce que le VLSM?</h3>
                <p>Le <strong>Variable Length Subnet Mask</strong> (VLSM) permet de cr√©er des sous-r√©seaux de tailles diff√©rentes au sein d'un m√™me r√©seau principal.</p>
                
                <div class="form-grid">
                    <div class="input-group">
                        <h4>üîÑ Comparaison Classique vs VLSM</h4>
                        <table class="comparison-table">
                            <tr>
                                <th>Aspect</th>
                                <th>Sous-r√©seautage Classique</th>
                                <th>VLSM</th>
                            </tr>
                            <tr>
                                <td>Taille des sous-r√©seaux</td>
                                <td>Tous identiques</td>
                                <td>Variables selon les besoins</td>
                            </tr>
                            <tr>
                                <td>Efficacit√© d'adressage</td>
                                <td>Faible (gaspillage)</td>
                                <td>√âlev√©e (optimisation)</td>
                            </tr>
                            <tr>
                                <td>Complexit√©</td>
                                <td>Simple</td>
                                <td>Plus complexe</td>
                            </tr>
                            <tr>
                                <td>Utilisation pratique</td>
                                <td>R√©seaux simples</td>
                                <td>R√©seaux d'entreprise</td>
                            </tr>
                        </table>
                    </div>
                    <div class="input-group">
                        <h4>üí∞ Avantages du VLSM</h4>
                        <ul>
                            <li><strong>√âconomie d'adresses IP:</strong> R√©duction du gaspillage d'adresses</li>
                            <li><strong>Flexibilit√© d'allocation:</strong> Adaptation aux besoins r√©els</li>
                            <li><strong>Optimisation des ressources:</strong> Meilleure utilisation de l'espace d'adressage</li>
                            <li><strong>Meilleure scalabilit√©:</strong> Facilit√© d'expansion du r√©seau</li>
                            <li><strong>Hi√©rarchisation:</strong> Possibilit√© de cr√©er des sous-r√©seaux dans des sous-r√©seaux</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="complex-example">
                <h3>üè¢ Exemple d'Entreprise Complexe</h3>
                <p>Imaginez une entreprise multinationale avec les besoins suivants:</p>
                
                <div class="scenario-card">
                    <h4>Si√®ge Social (Paris)</h4>
                    <ul>
                        <li>Direction: 15 h√¥tes</li>
                        <li>Administration: 45 h√¥tes</li>
                        <li>Informatique: 25 h√¥tes</li>
                        <li>R&D: 60 h√¥tes</li>
                        <li>Serveurs: 20 h√¥tes</li>
                    </ul>
                </div>
                
                <div class="scenario-card">
                    <h4>Succursale (Lyon)</h4>
                    <ul>
                        <li>Commercial: 30 h√¥tes</li>
                        <li>Production: 100 h√¥tes</li>
                        <li>Logistique: 40 h√¥tes</li>
                    </ul>
                </div>
                
                <div class="scenario-card">
                    <h4>Succursale (Marseille)</h4>
                    <ul>
                        <li>Commercial: 20 h√¥tes</li>
                        <li>Support: 15 h√¥tes</li>
                    </ul>
                </div>
                
                <p><strong>Objectif:</strong> Utiliser le r√©seau 172.16.0.0/16 pour r√©pondre √† tous ces besoins avec le VLSM.</p>
            </div>

            <div class="exercise-grid">
                <div class="exercise-card">
                    <h4>üìù Exercice 1: Conversion Binaire
                        <span class="difficulty-badge difficulty-easy">Facile</span>
                    </h4>
                    <p>Convertissez l'adresse IP 172.16.32.0 en notation binaire.</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showSolution(1)">Voir la Solution</button>
                    </div>
                    <div id="solution1" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <strong>Solution:</strong> 10101100.00010000.00100000.00000000
                        <br><br>
                        <strong>Explication d√©taill√©e:</strong>
                        <br>172 = 128 + 32 + 8 + 4 = 10101100
                        <br>16 = 16 = 00010000
                        <br>32 = 32 = 00100000
                        <br>0 = 0 = 00000000
                    </div>
                </div>

                <div class="exercise-card">
                    <h4>üéØ Exercice 2: Masque de Sous-R√©seau
                        <span class="difficulty-badge difficulty-medium">Moyen</span>
                    </h4>
                    <p>Quel est le masque CIDR pour un sous-r√©seau de 30 h√¥tes?</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showSolution(2)">Voir la Solution</button>
                    </div>
                    <div id="solution2" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <strong>Solution:</strong> /27 (32 adresses totales, 30 h√¥tes utilisables)
                        <br><br>
                        <strong>Explication d√©taill√©e:</strong>
                        <br>Nombre d'adresses n√©cessaires = 30 h√¥tes + 1 r√©seau + 1 broadcast = 32
                        <br>2<sup>n</sup> ‚â• 32 ‚Üí n = 5 bits pour les h√¥tes
                        <br>Masque = 32 - 5 = /27
                    </div>
                </div>

                <div class="exercise-card">
                    <h4>üî• Exercice 3: Calcul VLSM Complexe
                        <span class="difficulty-badge difficulty-hard">Difficile</span>
                    </h4>
                    <p>√Ä partir du r√©seau 192.168.0.0/22, cr√©ez des sous-r√©seaux pour:
                    <br>- D√©partement A: 120 h√¥tes
                    <br>- D√©partement B: 60 h√¥tes
                    <br>- D√©partement C: 30 h√¥tes
                    <br>- D√©partement D: 12 h√¥tes
                    </p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showSolution(3)">Voir la Solution</button>
                    </div>
                    <div id="solution3" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <strong>Solution:</strong>
                        <br>1. Trier par taille d√©croissante: A(120), B(60), C(30), D(12)
                        <br>2. D√©partement A: 120+2=122 ‚Üí 2<sup>7</sup>=128 ‚Üí /25
                        <br>3. D√©partement B: 60+2=62 ‚Üí 2<sup>6</sup>=64 ‚Üí /26
                        <br>4. D√©partement C: 30+2=32 ‚Üí 2<sup>5</sup>=32 ‚Üí /27
                        <br>5. D√©partement D: 12+2=14 ‚Üí 2<sup>4</sup>=16 ‚Üí /28
                        <br><br>
                        <strong>R√©sultats:</strong>
                        <br>A: 192.168.0.0/25
                        <br>B: 192.168.0.128/26
                        <br>C: 192.168.0.192/27
                        <br>D: 192.168.0.224/28
                    </div>
                </div>
            </div>
        </section>

        <!-- Section M√©thodologie -->
        <section id="methodology" class="tab-content">
            <h2>üõ†Ô∏è M√©thodologie VLSM - Approche Syst√©matique</h2>
            
            <div class="learning-objective">
                <h3>üéØ Processus en 5 √âtapes</h3>
                <p>Suivez cette m√©thodologie pour r√©soudre efficacement tout probl√®me VLSM</p>
            </div>

            <div class="methodology-grid">
                <div class="methodology-card">
                    <h4>1. üìä Analyse des Besoins</h4>
                    <ul>
                        <li>Identifier tous les sous-r√©seaux n√©cessaires</li>
                        <li>Lister le nombre d'h√¥tes par sous-r√©seau</li>
                        <li>Ajouter une marge pour la croissance future</li>
                        <li>Prioriser les sous-r√©seaux critiques</li>
                    </ul>
                </div>

                <div class="methodology-card">
                    <h4>2. üî¢ Tri D√©croissant</h4>
                    <ul>
                        <li>Classer les sous-r√©seaux par taille d√©croissante</li>
                        <li>Commencer par le plus grand sous-r√©seau</li>
                        <li>√âviter les chevauchements d'adresses</li>
                        <li>Optimiser l'espace d'adressage</li>
                    </ul>
                </div>

                <div class="methodology-card">
                    <h4>3. üßÆ Calcul des Masques</h4>
                    <ul>
                        <li>Pour chaque sous-r√©seau: h√¥tes + 2</li>
                        <li>Trouver la puissance de 2 imm√©diatement sup√©rieure</li>
                        <li>Calculer le nouveau pr√©fixe CIDR</li>
                        <li>D√©terminer le nombre de bits emprunt√©s</li>
                    </ul>
                </div>

                <div class="methodology-card">
                    <h4>4. üéØ Allocation des Adresses</h4>
                    <ul>
                        <li>Allouer les sous-r√©seaux dans l'ordre tri√©</li>
                        <li>Utiliser l'adresse r√©seau suivante disponible</li>
                        <li>V√©rifier les plages d'adresses</li>
                        <li>Documenter chaque allocation</li>
                    </ul>
                </div>

                <div class="methodology-card">
                    <h4>5. ‚úÖ V√©rification et Documentation</h4>
                    <ul>
                        <li>V√©rifier l'absence de chevauchement</li>
                        <li>Calculer l'efficacit√© d'adressage</li>
                        <li>Documenter le plan d'adressage</li>
                        <li>Pr√©parer la configuration des √©quipements</li>
                    </ul>
                </div>
            </div>

            <div class="cheatsheet">
                <h3>üìã Aide-m√©moire VLSM</h3>
                <div class="form-grid">
                    <div class="input-group">
                        <h4>üé≠ Table des Masques CIDR</h4>
                        <table class="comparison-table">
                            <tr><th>CIDR</th><th>Masque</th><th>H√¥tes</th><th>Adresses</th></tr>
                            <tr><td>/24</td><td>255.255.255.0</td><td>254</td><td>256</td></tr>
                            <tr><td>/25</td><td>255.255.255.128</td><td>126</td><td>128</td></tr>
                            <tr><td>/26</td><td>255.255.255.192</td><td>62</td><td>64</td></tr>
                            <tr><td>/27</td><td>255.255.255.224</td><td>30</td><td>32</td></tr>
                            <tr><td>/28</td><td>255.255.255.240</td><td>14</td><td>16</td></tr>
                            <tr><td>/29</td><td>255.255.255.248</td><td>6</td><td>8</td></tr>
                            <tr><td>/30</td><td>255.255.255.252</td><td>2</td><td>4</td></tr>
                        </table>
                    </div>
                    <div class="input-group">
                        <h4>üî¢ Formules Importantes</h4>
                        <div class="step-content">
                            <strong>Nombre d'adresses:</strong> 2<sup>(32 - pr√©fixe)</sup><br>
                            <strong>H√¥tes utilisables:</strong> 2<sup>(32 - pr√©fixe)</sup> - 2<br>
                            <strong>Pr√©fixe requis:</strong> 32 - ‚åàlog‚ÇÇ(h√¥tes + 2)‚åâ<br>
                            <strong>Bits emprunt√©s:</strong> nouveau_pr√©fixe - pr√©fixe_initial<br>
                            <strong>Efficacit√©:</strong> (h√¥tes_demand√©s / h√¥tes_allou√©s) √ó 100%
                        </div>
                    </div>
                </div>
            </div>

            <div class="interactive-tool">
                <h3>üîÑ Simulateur de Processus VLSM</h3>
                <div class="form-grid">
                    <div class="input-group">
                        <label for="processNetwork">R√©seau</label>
                        <input type="text" id="processNetwork" value="192.168.0.0" placeholder="192.168.0.0">
                    </div>
                    <div class="input-group">
                        <label for="processMask">Masque Initial</label>
                        <input type="text" id="processMask" value="/24" placeholder="/24">
                    </div>
                </div>
                <div id="processSteps"></div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="demonstrateProcess()">D√©montrer le Processus</button>
                </div>
            </div>
        </section>

        <!-- Section Vue Binaire -->
        <section id="binary" class="tab-content">
            <h2>üî¢ Transformation Binaire des Adresses</h2>
            
            <div class="binary-explanation">
                <h3>üéØ Comprendre la Structure Binaire</h3>
                
                <div id="mainNetworkAnalysis"></div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--network-bit);"></div>
                        <span>Bits R√©seau (Fix√©s)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--subnet-bit);"></div>
                        <span>Bits Sous-r√©seau (Emprunt√©s)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--host-bit);"></div>
                        <span>Bits H√¥te (Variables)</span>
                    </div>
                </div>
            </div>

            <div id="subnetBinaryDetails"></div>

            <div class="exercise-grid">
                <div class="exercise-card">
                    <h4>üî¢ Exercice Binaire 1
                        <span class="difficulty-badge difficulty-medium">Moyen</span>
                    </h4>
                    <p>Repr√©sentez l'adresse 10.20.30.40/24 en binaire et identifiez les parties r√©seau et h√¥te.</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showBinarySolution(1)">Voir la Solution</button>
                    </div>
                    <div id="binarySolution1" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <strong>Solution:</strong>
                        <br>10.20.30.40 = 00001010.00010100.00011110.00101000
                        <br>Avec masque /24: 
                        <br>- Bits r√©seau: 00001010.00010100.00011110 (24 bits)
                        <br>- Bits h√¥te: 00101000 (8 bits)
                    </div>
                </div>

                <div class="exercise-card">
                    <h4>üî¢ Exercice Binaire 2
                        <span class="difficulty-badge difficulty-hard">Difficile</span>
                    </h4>
                    <p>Pour le r√©seau 172.16.0.0/16, cr√©ez un sous-r√©seau /22 et repr√©sentez-le en binaire.</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showBinarySolution(2)">Voir la Solution</button>
                    </div>
                    <div id="binarySolution2" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <strong>Solution:</strong>
                        <br>R√©seau principal: 172.16.0.0/16
                        <br>Bits emprunt√©s: 22 - 16 = 6 bits
                        <br>Sous-r√©seau: 172.16.0.0/22
                        <br>Repr√©sentation binaire:
                        <br>10101100.00010000.000000|00.00000000
                        <br>R√©seau(16)|Sous-r√©seau(6)|H√¥te(10)
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Laboratoire -->
        <section id="lab" class="tab-content">
            <h2>üî¨ Laboratoire Pratique</h2>
            
            <div class="learning-objective">
                <h3>üéØ Sc√©nario d'Entreprise R√©el</h3>
                <p>Vous √™tes l'administrateur r√©seau d'une entreprise qui doit segmenter son r√©seau en plusieurs d√©partements avec des besoins diff√©rents.</p>
            </div>

            <div class="form-grid">
                <div class="input-group">
                    <label for="network">
                        üåê Adresse R√©seau Principal
                        <span class="tooltip">‚ÑπÔ∏è
                            <span class="tooltip-text">Adresse IP du r√©seau √† segmenter. Exemple: 192.168.0.0/22 permet 1024 adresses totales.</span>
                        </span>
                    </label>
                    <input type="text" id="network" placeholder="192.168.0.0" value="192.168.0.0">
                </div>

                <div class="input-group">
                    <label for="mask">
                        üé≠ Masque CIDR Initial
                        <span class="tooltip">‚ÑπÔ∏è
                            <span class="tooltip-text">Le masque d√©finit la taille du r√©seau principal. /22 = 1024 adresses, /24 = 256 adresses.</span>
                        </span>
                    </label>
                    <input type="text" id="mask" placeholder="/22" value="/22">
                </div>

                <div class="input-group">
                    <label for="subnetCount">
                        üè¢ Nombre de D√©partements
                        <span class="tooltip">‚ÑπÔ∏è
                            <span class="tooltip-text">Chaque d√©partement aura son propre sous-r√©seau avec une taille adapt√©e √† ses besoins.</span>
                        </span>
                    </label>
                    <input type="number" id="subnetCount" min="1" max="10" value="4">
                </div>
            </div>

            <div id="departmentInputs"></div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="generateDepartmentInputs()">
                    üöÄ Configurer les D√©partements
                </button>
                <button class="btn btn-secondary" onclick="loadEducationalExample()">
                    üìã Exemple P√©dagogique
                </button>
                <button class="btn btn-secondary" onclick="loadComplexExample()">
                    üè¢ Exemple Complexe
                </button>
                <button class="btn btn-primary" onclick="calculateVLSM()">
                    üßÆ Lancer le Calcul VLSM
                </button>
            </div>

            <div class="concept-explanation">
                <h3>üí° Conseils pour le Laboratoire</h3>
                <div class="tip-item">
                    <span class="tip-icon">üî¢</span>
                    <div>
                        <strong>Commencez par les plus grands sous-r√©seaux:</strong> Allouez d'abord les sous-r√©seaux avec le plus d'h√¥tes.
                    </div>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üìà</span>
                    <div>
                        <strong>Pr√©voyez la croissance:</strong> Ajoutez 20% d'adresses suppl√©mentaires pour l'expansion future.
                    </div>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üõ°Ô∏è</span>
                    <div>
                        <strong>Pensez s√©curit√©:</strong> Isolez les d√©partements sensibles dans des sous-r√©seaux s√©par√©s.
                    </div>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üîç</span>
                    <div>
                        <strong>V√©rifiez les chevauchements:</strong> Assurez-vous que les plages d'adresses ne se chevauchent pas.
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Calcul VLSM -->
        <section id="calculation" class="tab-content">
            <h2>üßÆ Calcul VLSM Pas √† Pas</h2>
            
            <div class="binary-explanation">
                <h3>üî¢ Analyse Binaire du R√©seau</h3>
                <div id="binaryAnalysis"></div>
            </div>

            <div id="stepByStepCalculation"></div>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number" id="totalHosts">0</span>
                    <span class="stat-label">H√¥tes Demand√©s</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalAllocated">0</span>
                    <span class="stat-label">H√¥tes Allou√©s</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="efficiency">0%</span>
                    <span class="stat-label">Efficacit√©</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="savings">0</span>
                    <span class="stat-label">Adresses √âconomis√©es</span>
                </div>
            </div>

            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>D√©partement</th>
                            <th>R√©seau</th>
                            <th>Masque</th>
                            <th>H√¥tes</th>
                            <th>Plage Utilisable</th>
                            <th>Broadcast</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody"></tbody>
                </table>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="showTab('practice')">
                    üí™ Passer √† la Pratique
                </button>
                <button class="btn btn-secondary" onclick="showTab('lab')">
                    ‚¨ÖÔ∏è Modifier la Configuration
                </button>
            </div>
        </section>

        <!-- Section Pratique Intensive -->
        <section id="practice" class="tab-content">
            <h2>üí™ Pratique Intensive VLSM</h2>
            
            <div class="learning-objective">
                <h3>üéØ Sc√©narios R√©els pour Ma√Ætriser le VLSM</h3>
                <p>Appliquez vos connaissances √† travers ces sc√©narios pratiques progressifs</p>
            </div>

            <div class="practice-scenario">
                <h3>üè¢ Sc√©nario 1: PME en Croissance</h3>
                <p><strong>Contexte:</strong> Une PME de 50 employ√©s pr√©voit de doubler ses effectifs dans 2 ans.</p>
                
                <div class="scenario-card">
                    <h4>Besoins Actuels:</h4>
                    <ul>
                        <li>Direction: 10 h√¥tes</li>
                        <li>Administration: 25 h√¥tes</li>
                        <li>Commercial: 15 h√¥tes</li>
                        <li>Production: 40 h√¥tes</li>
                        <li>Serveurs: 8 h√¥tes</li>
                    </ul>
                </div>
                
                <div class="scenario-card">
                    <h4>Objectif:</h4>
                    <p>Utiliser le r√©seau 10.0.0.0/24 avec une marge de croissance de 50% pour chaque d√©partement.</p>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="loadScenario(1)">Charger ce Sc√©nario</button>
                    <button class="btn btn-secondary" onclick="showScenarioSolution(1)">Voir la Solution</button>
                </div>
                
                <div id="scenarioSolution1" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                    <strong>Solution:</strong>
                    <br>1. Appliquer la marge: Direction(15), Administration(38), Commercial(23), Production(60), Serveurs(12)
                    <br>2. Trier: Production(60), Administration(38), Commercial(23), Direction(15), Serveurs(12)
                    <br>3. Calculs:
                    <br>   - Production: 60+2=62 ‚Üí /26 (64 adresses)
                    <br>   - Administration: 38+2=40 ‚Üí /26 (64 adresses)
                    <br>   - Commercial: 23+2=25 ‚Üí /27 (32 adresses)
                    <br>   - Direction: 15+2=17 ‚Üí /27 (32 adresses)
                    <br>   - Serveurs: 12+2=14 ‚Üí /28 (16 adresses)
                    <br>4. Allocation:
                    <br>   - Production: 10.0.0.0/26
                    <br>   - Administration: 10.0.0.64/26
                    <br>   - Commercial: 10.0.0.128/27
                    <br>   - Direction: 10.0.0.160/27
                    <br>   - Serveurs: 10.0.0.192/28
                </div>
            </div>

            <div class="practice-scenario">
                <h3>üè≠ Sc√©nario 2: Usine Automatis√©e</h3>
                <p><strong>Contexte:</strong> Une usine avec automation industrielle et IoT.</p>
                
                <div class="scenario-card">
                    <h4>Besoins:</h4>
                    <ul>
                        <li>Contr√¥le industriel: 500 capteurs</li>
                        <li>Supervision: 50 postes</li>
                        <li>R√©seau invit√©s: 100 h√¥tes</li>
                        <li>Cam√©ras surveillance: 80 unit√©s</li>
                        <li>R√©seau administratif: 30 h√¥tes</li>
                        <li>R√©seau maintenance: 20 h√¥tes</li>
                    </ul>
                </div>
                
                <div class="scenario-card">
                    <h4>Contraintes:</h4>
                    <p>Utiliser 172.20.0.0/16 avec isolation des r√©seaux critiques.</p>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="loadScenario(2)">Charger ce Sc√©nario</button>
                    <button class="btn btn-secondary" onclick="showScenarioSolution(2)">Voir la Solution</button>
                </div>
                
                <div id="scenarioSolution2" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                    <strong>Solution:</strong>
                    <br>1. Trier: Contr√¥le(500), Invit√©s(100), Cam√©ras(80), Supervision(50), Admin(30), Maintenance(20)
                    <br>2. Calculs:
                    <br>   - Contr√¥le: 500+2=502 ‚Üí /23 (512 adresses)
                    <br>   - Invit√©s: 100+2=102 ‚Üí /25 (128 adresses)
                    <br>   - Cam√©ras: 80+2=82 ‚Üí /25 (128 adresses)
                    <br>   - Supervision: 50+2=52 ‚Üí /26 (64 adresses)
                    <br>   - Admin: 30+2=32 ‚Üí /27 (32 adresses)
                    <br>   - Maintenance: 20+2=22 ‚Üí /27 (32 adresses)
                    <br>3. Allocation:
                    <br>   - Contr√¥le: 172.20.0.0/23
                    <br>   - Invit√©s: 172.20.2.0/25
                    <br>   - Cam√©ras: 172.20.2.128/25
                    <br>   - Supervision: 172.20.3.0/26
                    <br>   - Admin: 172.20.3.64/27
                    <br>   - Maintenance: 172.20.3.96/27
                </div>
            </div>

            <div class="practice-scenario">
                <h3>üè• Sc√©nario 3: H√¥pital</h3>
                <p><strong>Contexte:</strong> Un h√¥pital avec besoins m√©dicaux critiques.</p>
                
                <div class="scenario-card">
                    <h4>D√©partements:</h4>
                    <ul>
                        <li>Urgences: 75 √©quipements</li>
                        <li>Bloc op√©ratoire: 40 √©quipements</li>
                        <li>Imagerie m√©dicale: 25 √©quipements</li>
                        <li>Laboratoire: 30 √©quipements</li>
                        <li>Administration: 60 postes</li>
                        <li>R√©seau patients: 200 h√¥tes</li>
                        <li>R√©seau invit√©s: 50 h√¥tes</li>
                    </ul>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="loadScenario(3)">Charger ce Sc√©nario</button>
                    <button class="btn btn-secondary" onclick="showScenarioSolution(3)">Voir la Solution</button>
                </div>
                
                <div id="scenarioSolution3" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                    <strong>Solution:</strong>
                    <br>1. Trier: Patients(200), Administration(60), Urgences(75), Bloc(40), Laboratoire(30), Imagerie(25), Invit√©s(50)
                    <br>2. Calculs:
                    <br>   - Patients: 200+2=202 ‚Üí /24 (256 adresses)
                    <br>   - Administration: 60+2=62 ‚Üí /26 (64 adresses)
                    <br>   - Urgences: 75+2=77 ‚Üí /25 (128 adresses)
                    <br>   - Bloc: 40+2=42 ‚Üí /26 (64 adresses)
                    <br>   - Laboratoire: 30+2=32 ‚Üí /27 (32 adresses)
                    <br>   - Imagerie: 25+2=27 ‚Üí /27 (32 adresses)
                    <br>   - Invit√©s: 50+2=52 ‚Üí /26 (64 adresses)
                    <br>3. Allocation:
                    <br>   - Patients: 10.10.0.0/24
                    <br>   - Administration: 10.10.1.0/26
                    <br>   - Urgences: 10.10.1.64/25
                    <br>   - Bloc: 10.10.1.192/26
                    <br>   - Laboratoire: 10.10.2.0/27
                    <br>   - Imagerie: 10.10.2.32/27
                    <br>   - Invit√©s: 10.10.2.64/26
                </div>
            </div>

            <div class="concept-explanation">
                <h3>üìä Progression d'Apprentissage</h3>
                <p>Votre niveau de ma√Ætrise du VLSM:</p>
                <div class="progress-bar">
                    <div class="progress" id="learningProgress" style="width: 0%"></div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="updateProgress(25)">+25% Sc√©nario 1 R√©ussi</button>
                    <button class="btn btn-primary" onclick="updateProgress(25)">+25% Sc√©nario 2 R√©ussi</button>
                    <button class="btn btn-primary" onclick="updateProgress(25)">+25% Sc√©nario 3 R√©ussi</button>
                    <button class="btn btn-secondary" onclick="updateProgress(25)">+25% Quiz R√©ussi</button>
                </div>
            </div>
        </section>

        <!-- Section Routage -->
        <section id="routing" class="tab-content">
            <h2>üö¶ Configuration des √âquipements R√©seau</h2>
            
            <div class="learning-objective">
                <h3>üéØ Mise en Pratique R√©elle</h3>
                <p>Apprenez √† configurer les routeurs et switches pour impl√©menter votre plan VLSM.</p>
            </div>

            <div class="config-tabs">
                <button class="config-tab active" onclick="showConfig('cisco')">üî∑ Cisco IOS</button>
                <button class="config-tab" onclick="showConfig('cisco-basic')">üî∑ Cisco D√©butant</button>
                <button class="config-tab" onclick="showConfig('hp')">üî∂ HP ProCurve</button>
                <button class="config-tab" onclick="showConfig('theory')">üìö Concepts</button>
            </div>

            <div id="cisco-config" class="config-content">
                <h3>üî∑ Configuration Cisco IOS Avanc√©e</h3>
                <div class="config-code" id="ciscoCode"></div>
            </div>

            <div id="cisco-basic-config" class="config-content" style="display: none;">
                <h3>üî∑ Cisco pour D√©butants</h3>
                <div class="config-code" id="ciscoBasicCode"></div>
            </div>

            <div id="hp-config" class="config-content" style="display: none;">
                <h3>üî∂ Configuration HP ProCurve</h3>
                <div class="config-code" id="hpCode"></div>
            </div>

            <div id="theory-config" class="config-content" style="display: none;">
                <h3>üìö Concepts de Routage Inter-VLAN</h3>
                <div class="concept-explanation">
                    <h4>üéØ Router-on-a-Stick</h4>
                    <p>Cette architecture utilise une interface physique unique avec des sous-interfaces pour router entre les VLANs.</p>
                    
                    <h4>üîß Composants Cl√©s</h4>
                    <ul>
                        <li><strong>Interface Trunk:</strong> Port transportant multiple VLANs</li>
                        <li><strong>Subinterfaces:</strong> Interfaces logiques par VLAN</li>
                        <li><strong>802.1Q:</strong> Protocole de trunking standard</li>
                    </ul>
                </div>
            </div>

            <div class="exercise-grid">
                <div class="exercise-card">
                    <h4>üíª Exercice de Configuration
                        <span class="difficulty-badge difficulty-medium">Moyen</span>
                    </h4>
                    <p>Configurez le VLAN 10 sur un switch Cisco avec l'adresse 192.168.1.1/24</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showConfigSolution()">Voir la Solution</button>
                    </div>
                    <div id="configSolution" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <pre>
Switch> enable
Switch# configure terminal
Switch(config)# vlan 10
Switch(config-vlan)# name Administration
Switch(config-vlan)# exit
Switch(config)# interface vlan 10
Switch(config-if)# ip address 192.168.1.1 255.255.255.0
Switch(config-if)# no shutdown
Switch(config-if)# exit
Switch(config)# write memory
                        </pre>
                    </div>
                </div>

                <div class="exercise-card">
                    <h4>üíª Exercice Avanc√©: Router-on-a-Stick
                        <span class="difficulty-badge difficulty-hard">Difficile</span>
                    </h4>
                    <p>Configurez un routeur Cisco pour router entre les VLANs 10, 20 et 30 sur l'interface GigabitEthernet0/0</p>
                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="showAdvancedConfigSolution()">Voir la Solution</button>
                    </div>
                    <div id="advancedConfigSolution" style="display: none; margin-top: 1rem; padding: 1rem; background: var(--light); border-radius: 8px;">
                        <pre>
Router> enable
Router# configure terminal
Router(config)# interface gigabitethernet0/0
Router(config-if)# no shutdown
Router(config-if)# exit

Router(config)# interface gigabitethernet0/0.10
Router(config-subif)# encapsulation dot1q 10
Router(config-subif)# ip address 192.168.10.1 255.255.255.0
Router(config-subif)# exit

Router(config)# interface gigabitethernet0/0.20
Router(config-subif)# encapsulation dot1q 20
Router(config-subif)# ip address 192.168.20.1 255.255.255.0
Router(config-subif)# exit

Router(config)# interface gigabitethernet0/0.30
Router(config-subif)# encapsulation dot1q 30
Router(config-subif)# ip address 192.168.30.1 255.255.255.0
Router(config-subif)# exit

Router(config)# ip routing
Router(config)# exit
Router# write memory
                        </pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section √âvaluation -->
        <section id="quiz" class="tab-content">
            <h2>‚úÖ √âvaluation des Connaissances</h2>
            
            <div class="quiz-container">
                <div class="quiz-question">
                    <h3>Question 1: Conversion Binaire</h3>
                    <p>Quelle est la repr√©sentation binaire de l'adresse IP 192.168.1.0?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">
                            11000000.10101000.00000001.00000000
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            11000000.10101000.00000010.00000000
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            11000000.10101001.00000001.00000000
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>Question 2: Calcul VLSM</h3>
                    <p>Vous avez besoin d'un sous-r√©seau pour 14 h√¥tes. Quel masque CIDR devez-vous utiliser?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">/26</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">/25</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">/28</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">/27</div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>Question 3: Configuration Routeur</h3>
                    <p>Quelle commande Cisco permet de cr√©er une sous-interface pour le VLAN 10?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">
                            interface gigabitethernet0/0.10
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            vlan interface 10
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            subinterface vlan 10
                        </div>
                    </div>
                </div>

                <div class="quiz-question">
                    <h3>Question 4: Calcul VLSM Complexe</h3>
                    <p>√Ä partir du r√©seau 10.0.0.0/16, vous devez cr√©er 3 sous-r√©seaux pour 500, 200 et 50 h√¥tes. Quel est le premier sous-r√©seau allou√© pour 500 h√¥tes?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'correct')">
                            10.0.0.0/23
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            10.0.0.0/22
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            10.0.0.0/24
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'incorrect')">
                            10.0.1.0/23
                        </div>
                    </div>
                </div>
            </div>

            <div class="concept-explanation">
                <h3>üìä R√©sultats d'Apprentissage</h3>
                <p>F√©licitations! Vous avez compl√©t√© cette plateforme d'apprentissage VLSM. Continuez √† pratiquer pour ma√Ætriser ces concepts essentiels en r√©seaux.</p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number" id="quizScore">0%</span>
                        <span class="stat-label">Score au Quiz</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="conceptsMastered">0</span>
                        <span class="stat-label">Concepts Ma√Ætris√©s</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="timeSpent">0min</span>
                        <span class="stat-label">Temps d'√âtude</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // √âtat global de l'application
        const AppState = {
            departments: [],
            results: [],
            quizScore: 0,
            startTime: new Date(),
            currentTab: 'theory',
            
            init() {
                this.loadFromStorage();
                this.updateLearningStats();
                this.showTab('theory');
            },
            
            saveToStorage() {
                const state = {
                    network: document.getElementById('network').value,
                    mask: document.getElementById('mask').value,
                    subnetCount: document.getElementById('subnetCount').value,
                    departments: this.departments,
                    quizScore: this.quizScore
                };
                localStorage.setItem('vlsm-learning-platform', JSON.stringify(state));
            },
            
            loadFromStorage() {
                const saved = localStorage.getItem('vlsm-learning-platform');
                if (saved) {
                    const state = JSON.parse(saved);
                    document.getElementById('network').value = state.network || '192.168.0.0';
                    document.getElementById('mask').value = state.mask || '/22';
                    document.getElementById('subnetCount').value = state.subnetCount || 4;
                    this.departments = state.departments || [];
                    this.quizScore = state.quizScore || 0;
                    
                    if (this.departments.length > 0) {
                        this.generateDepartmentInputs();
                    }
                }
            },
            
            updateLearningStats() {
                const timeSpent = Math.round((new Date() - this.startTime) / 60000);
                document.getElementById('timeSpent').textContent = timeSpent + 'min';
                document.getElementById('quizScore').textContent = this.quizScore + '%';
                document.getElementById('conceptsMastered').textContent = this.departments.length;
            },
            
            addDepartment(department) {
                this.departments.push(department);
                this.saveToStorage();
            },
            
            updateDepartment(index, field, value) {
                if (this.departments[index]) {
                    this.departments[index][field] = value;
                    this.saveToStorage();
                }
            },

            showTab(tabId) {
                // Masquer tous les onglets
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Activer l'onglet s√©lectionn√©
                const activeTab = document.querySelector(`.nav-tab:nth-child(${this.getTabIndex(tabId) + 1})`);
                if (activeTab) {
                    activeTab.classList.add('active');
                }
                document.getElementById(tabId).classList.add('active');
                AppState.currentTab = tabId;
                
                // Mettre √† jour les contenus dynamiques
                if (tabId === 'calculation' && AppState.results.length > 0) {
                    updateBinaryAnalysis();
                    updateStepByStepCalculation();
                } else if (tabId === 'binary' && AppState.results.length > 0) {
                    updateBinaryAnalysis();
                    updateSubnetBinaryDetails();
                }
            },

            getTabIndex(tabId) {
                const tabs = ['theory', 'methodology', 'binary', 'lab', 'calculation', 'practice', 'routing', 'quiz'];
                return tabs.indexOf(tabId);
            },

            generateDepartmentInputs() {
                const subnetCount = parseInt(document.getElementById('subnetCount').value);
                const container = document.getElementById('departmentInputs');
                
                if (isNaN(subnetCount) || subnetCount < 1) {
                    alert('Veuillez entrer un nombre valide de d√©partements');
                    return;
                }
                
                let html = '<h3>üè¢ Configuration des D√©partements</h3><div class="form-grid">';
                const templateKeys = Object.keys(DepartmentTemplates);
                
                for (let i = 0; i < subnetCount; i++) {
                    const template = DepartmentTemplates[templateKeys[i % templateKeys.length]];
                    
                    html += `
                        <div class="input-group">
                            <label>D√©partement ${i + 1} - VLAN ${template.vlan + i}</label>
                            <input type="text" 
                                   value="${template.name}" 
                                   onchange="AppState.updateDepartment(${i}, 'name', this.value)"
                                   placeholder="Nom du d√©partement">
                            <input type="number" 
                                   value="${template.hosts}" 
                                   onchange="AppState.updateDepartment(${i}, 'hosts', parseInt(this.value))"
                                   min="1" 
                                   placeholder="Nombre d'h√¥tes">
                            <select onchange="applyTemplate(${i}, this.value)">
                                <option value="">Choisir un mod√®le</option>
                                ${Object.keys(DepartmentTemplates).map(key => 
                                    `<option value="${key}" ${key === templateKeys[i % templateKeys.length] ? 'selected' : ''}>
                                        ${DepartmentTemplates[key].name} (VLAN ${DepartmentTemplates[key].vlan})
                                    </option>`
                                ).join('')}
                            </select>
                            <small>${template.description}</small>
                        </div>
                    `;
                    
                    if (!AppState.departments[i]) {
                        AppState.departments[i] = { 
                            ...template,
                            vlan: template.vlan + i
                        };
                    }
                }
                
                html += '</div>';
                container.innerHTML = html;
                AppState.saveToStorage();
            }
        };

        // Templates de d√©partements p√©dagogiques
        const DepartmentTemplates = {
            administration: { 
                name: "Administration", 
                hosts: 50, 
                vlan: 10,
                description: "Services administratifs et gestion",
                color: "#2E7D32"
            },
            production: { 
                name: "Production", 
                hosts: 120, 
                vlan: 20,
                description: "Atelier et ligne de production",
                color: "#1565C0"
            },
            commercial: { 
                name: "Commercial", 
                hosts: 30, 
                vlan: 30,
                description: "√âquipe commerciale et marketing",
                color: "#FF6D00"
            },
            recherche: { 
                name: "R&D", 
                hosts: 25, 
                vlan: 40,
                description: "Laboratoire R&D",
                color: "#6A1B9A"
            }
        };

        // Templates pour exemple complexe
        const ComplexExampleTemplates = {
            administration: { 
                name: "Administration", 
                hosts: 60, 
                vlan: 10,
                description: "Services administratifs",
                color: "#2E7D32"
            },
            production: { 
                name: "Production", 
                hosts: 200, 
                vlan: 20,
                description: "Ligne de production",
                color: "#1565C0"
            },
            commercial: { 
                name: "Commercial", 
                hosts: 100, 
                vlan: 30,
                description: "√âquipe commerciale",
                color: "#FF6D00"
            },
            recherche: { 
                name: "R&D", 
                hosts: 80, 
                vlan: 40,
                description: "Recherche et d√©veloppement",
                color: "#6A1B9A"
            }
        };

        // Fonctions principales
        function showTab(tabId) {
            AppState.showTab(tabId);
        }

        function showConfig(vendor) {
            document.querySelectorAll('.config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.config-content').forEach(content => {
                content.style.display = 'none';
            });
            
            event.target.classList.add('active');
            document.getElementById(`${vendor}-config`).style.display = 'block';
            
            if (AppState.results.length > 0) {
                generateRouterConfigs();
            }
        }

        function applyTemplate(index, templateKey) {
            if (DepartmentTemplates[templateKey]) {
                AppState.departments[index] = { 
                    ...DepartmentTemplates[templateKey],
                    vlan: DepartmentTemplates[templateKey].vlan + index
                };
                AppState.generateDepartmentInputs();
            }
        }

        // Fonctions de calcul VLSM
        function ipToInt(ip) {
            return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) >>> 0;
        }

        function intToIp(int) {
            return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
        }

        function ipToBinary(ip) {
            return ip.split('.').map(octet => 
                parseInt(octet).toString(2).padStart(8, '0')
            ).join('');
        }

        function binaryToIp(binary) {
            const octets = [];
            for (let i = 0; i < 32; i += 8) {
                octets.push(parseInt(binary.substr(i, 8), 2));
            }
            return octets.join('.');
        }

        function maskToPrefix(mask) {
            if (mask.startsWith('/')) {
                return parseInt(mask.slice(1));
            }
            const parts = mask.split('.').map(Number);
            const binary = parts.map(part => part.toString(2).padStart(8, '0')).join('');
            return binary.indexOf('0');
        }

        function prefixToMask(prefix) {
            let mask = '';
            for (let i = 0; i < 32; i++) {
                mask += i < prefix ? '1' : '0';
            }
            return binaryToIp(mask);
        }

        function calculateVLSM() {
            const network = document.getElementById('network').value;
            const mask = document.getElementById('mask').value;
            
            if (!network || !mask || AppState.departments.length === 0) {
                alert('Veuillez compl√©ter la configuration des d√©partements');
                return;
            }
            
            const prefix = maskToPrefix(mask);
            const networkInt = ipToInt(network);
            const totalSize = Math.pow(2, 32 - prefix);
            
            // Trier par nombre d'h√¥tes d√©croissant
            const sortedDepartments = [...AppState.departments].sort((a, b) => b.hosts - a.hosts);
            
            let currentAddress = networkInt;
            AppState.results = [];
            let totalRequested = 0;
            let totalAllocated = 0;
            
            for (let i = 0; i < sortedDepartments.length; i++) {
                const dept = sortedDepartments[i];
                const neededAddresses = dept.hosts + 2;
                const newPrefix = 32 - Math.ceil(Math.log2(neededAddresses));
                const subnetSize = Math.pow(2, 32 - newPrefix);
                const subnetBits = newPrefix - prefix;
                
                const networkAddr = currentAddress;
                const firstUsable = networkAddr + 1;
                const lastUsable = networkAddr + subnetSize - 2;
                const broadcastAddr = networkAddr + subnetSize - 1;
                
                AppState.results.push({
                    name: dept.name,
                    vlan: dept.vlan,
                    network: intToIp(networkAddr),
                    prefix: newPrefix,
                    hosts: subnetSize - 2,
                    firstIP: intToIp(firstUsable),
                    lastIP: intToIp(lastUsable),
                    broadcast: intToIp(broadcastAddr),
                    color: dept.color,
                    requested: dept.hosts,
                    subnetBits: subnetBits,
                    hostBits: 32 - newPrefix,
                    binaryNetwork: ipToBinary(intToIp(networkAddr)),
                    description: dept.description
                });
                
                totalRequested += dept.hosts;
                totalAllocated += subnetSize - 2;
                currentAddress += subnetSize;
            }
            
            // Trier par VLAN
            AppState.results.sort((a, b) => a.vlan - b.vlan);
            
            displayResults(totalRequested, totalAllocated);
            showTab('calculation');
        }

        function displayResults(totalRequested, totalAllocated) {
            // Mettre √† jour les statistiques
            document.getElementById('totalHosts').textContent = totalRequested;
            document.getElementById('totalAllocated').textContent = totalAllocated;
            
            const efficiency = totalAllocated > 0 ? Math.round((totalRequested / totalAllocated) * 100) : 0;
            document.getElementById('efficiency').textContent = efficiency + '%';
            document.getElementById('savings').textContent = Math.max(0, totalAllocated - totalRequested);
            
            // Mettre √† jour le tableau
            const tbody = document.getElementById('resultsBody');
            tbody.innerHTML = AppState.results.map(result => `
                <tr>
                    <td><strong>${result.name}</strong><br><small>VLAN ${result.vlan}</small></td>
                    <td>${result.network}</td>
                    <td>/${result.prefix}</td>
                    <td>${result.requested}/${result.hosts}</td>
                    <td>${result.firstIP} - ${result.lastIP}</td>
                    <td>${result.broadcast}</td>
                </tr>
            `).join('');
            
            updateBinaryAnalysis();
            updateStepByStepCalculation();
            updateSubnetBinaryDetails();
            generateRouterConfigs();
            AppState.updateLearningStats();
        }

        function updateBinaryAnalysis() {
            const network = document.getElementById('network').value;
            const prefix = maskToPrefix(document.getElementById('mask').value);
            const binaryNetwork = ipToBinary(network);
            
            let html = `
                <div style="margin-bottom: 1rem;">
                    <strong>R√©seau Principal:</strong> ${network}/${prefix}
                </div>
                <div class="bits-container">
            `;
            
            for (let i = 0; i < 32; i++) {
                let bitClass = 'bit';
                const bitValue = binaryNetwork[i];
                
                if (i < prefix) {
                    bitClass += ' bit-network';
                } else {
                    bitClass += ' bit-host';
                }
                
                if (bitValue === '1') {
                    bitClass += ' bit-1';
                } else {
                    bitClass += ' bit-0';
                }
                
                html += `<div class="${bitClass}" title="Bit ${i}: ${i < prefix ? 'R√©seau' : 'H√¥te'}">${bitValue}</div>`;
                
                if ((i + 1) % 8 === 0 && i < 31) {
                    html += '<div style="width: 20px; text-align: center;">.</div>';
                }
            }
            
            html += `</div>`;
            document.getElementById('binaryAnalysis').innerHTML = html;
        }

        function updateSubnetBinaryDetails() {
            const network = document.getElementById('network').value;
            const prefix = maskToPrefix(document.getElementById('mask').value);
            
            // Analyse du r√©seau principal
            let mainHtml = `
                <h4>üåê R√©seau Principal: ${network}/${prefix}</h4>
                <div class="step-content">
                    <strong>Adresse r√©seau:</strong> ${network}<br>
                    <strong>Masque:</strong> /${prefix} (${prefixToMask(prefix)})<br>
                    <strong>Bits r√©seau:</strong> ${prefix}<br>
                    <strong>Bits h√¥te disponibles:</strong> ${32 - prefix}<br>
                    <strong>Adresses totales:</strong> 2<sup>${32 - prefix}</sup> = ${Math.pow(2, 32 - prefix)}
                </div>
                ${createBinaryVisualization(ipToBinary(network), prefix, 0, "Structure binaire du r√©seau principal")}
            `;
            
            document.getElementById('mainNetworkAnalysis').innerHTML = mainHtml;
            
            // D√©tails des sous-r√©seaux
            let subnetHtml = '<h4>üîß Transformation en Sous-r√©seaux VLSM</h4>';
            
            AppState.results.forEach((result, index) => {
                const mainPrefix = maskToPrefix(document.getElementById('mask').value);
                
                subnetHtml += `
                    <div class="subnet-analysis">
                        <div class="step-title">${result.name} - ${result.network}/${result.prefix}</div>
                        
                        <div class="step-content">
                            <strong>Calcul du masque:</strong><br>
                            ‚Ä¢ H√¥tes demand√©s: ${result.requested}<br>
                            ‚Ä¢ Adresses n√©cessaires: ${result.requested} + 2 = ${result.requested + 2}<br>
                            ‚Ä¢ Nouveau pr√©fixe: 32 - ‚åàlog‚ÇÇ(${result.requested + 2})‚åâ = /${result.prefix}<br>
                            ‚Ä¢ Bits emprunt√©s: ${result.prefix} - ${mainPrefix} = ${result.subnetBits}<br>
                            ‚Ä¢ Bits h√¥te restants: ${result.hostBits}<br>
                            ‚Ä¢ Taille: 2<sup>${result.hostBits}</sup> = ${Math.pow(2, result.hostBits)} adresses
                        </div>
                        
                        ${createBinaryVisualization(result.binaryNetwork, mainPrefix, result.subnetBits, "Structure binaire du sous-r√©seau")}
                        
                        <div class="binary-transformation">
                            <strong>Transformation binaire d√©taill√©e:</strong><br>
                            R√©seau principal: ${ipToBinary(network).match(/.{1,8}/g).join('.')}<br>
                            Masque principal: ${'1'.repeat(mainPrefix)}${'0'.repeat(32-mainPrefix).match(/.{1,8}/g).join('.')}<br>
                            ‚Üí Bits r√©seau fixes: ${mainPrefix} bits<br>
                            ‚Üí Bits emprunt√©s: ${result.subnetBits} bits<br>
                            ‚Üí Nouveau masque: ${'1'.repeat(result.prefix)}${'0'.repeat(32-result.prefix).match(/.{1,8}/g).join('.')}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('subnetBinaryDetails').innerHTML = subnetHtml;
        }

        function createBinaryVisualization(binary, prefix, subnetBits = 0, title = "") {
            let html = '';
            if (title) {
                html += `<div style="text-align: center; margin-bottom: 1rem; font-weight: bold;">${title}</div>`;
            }
            
            html += '<div class="bits-container">';
            
            for (let i = 0; i < 32; i++) {
                let bitClass = 'bit';
                const bitValue = binary[i];
                
                if (i < prefix) {
                    bitClass += ' bit-network';
                } else if (i < prefix + subnetBits) {
                    bitClass += ' bit-subnet';
                } else {
                    bitClass += ' bit-host';
                }
                
                if (bitValue === '1') {
                    bitClass += ' bit-1';
                } else {
                    bitClass += ' bit-0';
                }
                
                const bitDescription = getBitDescription(i, prefix, subnetBits);
                html += `<div class="${bitClass}" title="${bitDescription}">${bitValue}</div>`;
                
                // Ajouter un s√©parateur tous les 8 bits
                if ((i + 1) % 8 === 0 && i < 31) {
                    html += '<div class="bit-separator">.</div>';
                }
            }
            
            html += '</div>';
            return html;
        }

        function getBitDescription(bitIndex, prefix, subnetBits) {
            if (bitIndex < prefix) {
                return `Bit r√©seau #${bitIndex + 1} - Partie fixe de l'adresse r√©seau`;
            } else if (bitIndex < prefix + subnetBits) {
                const subnetBitNum = bitIndex - prefix + 1;
                return `Bit sous-r√©seau #${subnetBitNum} - Identifie le sous-r√©seau (valeur: ${Math.pow(2, subnetBits - subnetBitNum)})`;
            } else {
                const hostBitNum = bitIndex - prefix - subnetBits + 1;
                return `Bit h√¥te #${hostBitNum} - Identifie l'h√¥te dans le sous-r√©seau`;
            }
        }

        function updateStepByStepCalculation() {
            const container = document.getElementById('stepByStepCalculation');
            let html = '<h3>üìù √âtapes de Calcul</h3>';
            
            const mainPrefix = maskToPrefix(document.getElementById('mask').value);
            const network = document.getElementById('network').value;
            
            html += `
                <div class="calculation-step">
                    <div class="step-title">üìù √âtape 1: Analyse du R√©seau Principal</div>
                    <div class="step-content">
                        <strong>R√©seau:</strong> ${network}/${mainPrefix}<br>
                        <strong>Plage d'adresses:</strong> ${network} - ${intToIp(ipToInt(network) + Math.pow(2, 32 - mainPrefix) - 1)}<br>
                        <strong>Bits disponibles pour le sous-r√©seautage:</strong> ${32 - mainPrefix} bits
                    </div>
                </div>
            `;
            
            // Trier par taille d√©croissante pour l'affichage des √©tapes
            const sortedResults = [...AppState.results].sort((a, b) => b.requested - a.requested);
            
            sortedResults.forEach((result, index) => {
                html += `
                    <div class="calculation-step">
                        <div class="step-title">üîß √âtape ${index + 2}: ${result.name}</div>
                        <div class="step-content">
                            <strong>Besoins:</strong> ${result.requested} h√¥tes<br>
                            <strong>Calcul de la taille requise:</strong><br>
                            &nbsp;&nbsp;‚Ä¢ H√¥tes + r√©seau + broadcast = ${result.requested} + 2 = ${result.requested + 2} adresses<br>
                            &nbsp;&nbsp;‚Ä¢ Plus petite puissance de 2 ‚â• ${result.requested + 2} = ${Math.pow(2, Math.ceil(Math.log2(result.requested + 2)))}<br>
                            &nbsp;&nbsp;‚Ä¢ Bits h√¥te n√©cessaires: log‚ÇÇ(${Math.pow(2, Math.ceil(Math.log2(result.requested + 2)))}) = ${Math.ceil(Math.log2(result.requested + 2))}<br>
                            &nbsp;&nbsp;‚Ä¢ Nouveau pr√©fixe: 32 - ${Math.ceil(Math.log2(result.requested + 2))} = /${result.prefix}<br>
                            <strong>R√©sultat:</strong> Sous-r√©seau ${result.network}/${result.prefix} avec ${result.hosts} h√¥tes utilisables
                        </div>
                    </div>
                `;
            });
            
            // Ajouter l'√©tape de synth√®se
            const totalRequested = AppState.results.reduce((sum, r) => sum + r.requested, 0);
            const totalAllocated = AppState.results.reduce((sum, r) => sum + r.hosts, 0);
            const efficiency = Math.round((totalRequested / totalAllocated) * 100);
            
            html += `
                <div class="calculation-step">
                    <div class="step-title">‚úÖ Synth√®se Finale</div>
                    <div class="step-content">
                        <strong>Performance du VLSM:</strong><br>
                        ‚Ä¢ H√¥tes demand√©s: ${totalRequested}<br>
                        ‚Ä¢ H√¥tes allou√©s: ${totalAllocated}<br>
                        ‚Ä¢ Efficacit√©: ${efficiency}%<br>
                        ‚Ä¢ Adresses √©conomis√©es: ${totalAllocated - totalRequested}<br>
                        ‚Ä¢ Sous-r√©seaux cr√©√©s: ${AppState.results.length}
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function generateRouterConfigs() {
            generateCiscoConfig();
            generateCiscoBasicConfig();
            generateHPConfig();
        }

        function generateCiscoConfig() {
            let config = `<span class="config-comment">! Configuration Cisco IOS - Routeur Principal</span>\n`;
            config += `<span class="config-keyword">enable</span>\n`;
            config += `<span class="config-keyword">configure terminal</span>\n\n`;
            
            config += `<span class="config-comment">! Configuration des VLANs</span>\n`;
            AppState.results.forEach(result => {
                config += `<span class="config-keyword">vlan</span> <span class="config-number">${result.vlan}</span>\n`;
                config += `<span class="config-keyword"> name</span> <span class="config-string">${result.name}</span>\n`;
                config += `<span class="config-keyword"> exit</span>\n`;
            });
            
            config += `\n<span class="config-comment">! Configuration des interfaces VLAN</span>\n`;
            AppState.results.forEach(result => {
                config += `<span class="config-keyword">interface vlan</span> <span class="config-number">${result.vlan}</span>\n`;
                config += `<span class="config-keyword"> description</span> <span class="config-string">Gateway ${result.name}</span>\n`;
                config += `<span class="config-keyword"> ip address</span> <span class="config-number">${result.firstIP}</span> <span class="config-number">255.255.255.${256 - Math.pow(2, 32 - result.prefix)}</span>\n`;
                config += `<span class="config-keyword"> no shutdown</span>\n`;
                config += `<span class="config-keyword"> exit</span>\n`;
            });
            
            document.getElementById('ciscoCode').innerHTML = config;
        }

        function generateCiscoBasicConfig() {
            let config = `<span class="config-comment">! CONFIGURATION CISCO POUR D√âBUTANTS</span>\n\n`;
            config += `<span class="config-comment">! Commandes de base √† conna√Ætre:</span>\n`;
            config += `<span class="config-keyword">enable</span> <span class="config-comment"># Passer en mode privil√©gi√©</span>\n`;
            config += `<span class="config-keyword">configure terminal</span> <span class="config-comment"># Mode configuration</span>\n\n`;
            
            config += `<span class="config-comment">! Exemple pour le VLAN 10:</span>\n`;
            config += `<span class="config-keyword">vlan 10</span>\n`;
            config += `<span class="config-keyword"> name ADMINISTRATION</span>\n`;
            config += `<span class="config-keyword">interface vlan 10</span>\n`;
            config += `<span class="config-keyword"> ip address 192.168.1.1 255.255.255.0</span>\n`;
            config += `<span class="config-keyword"> no shutdown</span>\n`;
            config += `<span class="config-keyword"> exit</span>\n\n`;
            
            config += `<span class="config-comment">! NE PAS OUBLIER:</span>\n`;
            config += `<span class="config-keyword">write memory</span> <span class="config-comment"># Sauvegarder!</span>\n`;
            
            document.getElementById('ciscoBasicCode').innerHTML = config;
        }

        function generateHPConfig() {
            let config = `<span class="config-comment"># Configuration HP ProCurve</span>\n\n`;
            
            config += `<span class="config-comment"># Configuration des VLANs</span>\n`;
            AppState.results.forEach(result => {
                config += `<span class="config-keyword">vlan</span> <span class="config-number">${result.vlan}</span>\n`;
                config += `<span class="config-keyword"> name</span> "<span class="config-string">${result.name}</span>"\n`;
            });
            
            config += `\n<span class="config-comment"># Configuration des adresses IP</span>\n`;
            AppState.results.forEach(result => {
                config += `<span class="config-keyword">ip address</span> <span class="config-number">${result.firstIP}</span>/<span class="config-number">${result.prefix}</span> <span class="config-keyword">vlan</span> <span class="config-number">${result.vlan}</span>\n`;
            });
            
            document.getElementById('hpCode').innerHTML = config;
        }

        // Fonctions p√©dagogiques
        function showSolution(exerciseNum) {
            const solution = document.getElementById(`solution${exerciseNum}`);
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
            } else {
                solution.style.display = 'none';
            }
        }

        function showBinarySolution(exerciseNum) {
            const solution = document.getElementById(`binarySolution${exerciseNum}`);
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
            } else {
                solution.style.display = 'none';
            }
        }

        function showConfigSolution() {
            const solution = document.getElementById('configSolution');
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
            } else {
                solution.style.display = 'none';
            }
        }

        function showAdvancedConfigSolution() {
            const solution = document.getElementById('advancedConfigSolution');
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
            } else {
                solution.style.display = 'none';
            }
        }

        function checkAnswer(element, result) {
            // R√©initialiser les autres options
            element.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Marquer la r√©ponse
            element.classList.add(result);
            
            if (result === 'correct') {
                AppState.quizScore = Math.min(100, AppState.quizScore + 25);
                AppState.updateLearningStats();
            }
        }

        function loadEducationalExample() {
            document.getElementById('network').value = '192.168.0.0';
            document.getElementById('mask').value = '/22';
            document.getElementById('subnetCount').value = 4;
            AppState.generateDepartmentInputs();
        }

        function loadComplexExample() {
            document.getElementById('network').value = '172.16.0.0';
            document.getElementById('mask').value = '/16';
            document.getElementById('subnetCount').value = 4;
            
            // Remplir avec l'exemple complexe
            AppState.departments = [];
            const templateKeys = Object.keys(ComplexExampleTemplates);
            
            for (let i = 0; i < 4; i++) {
                AppState.departments[i] = { 
                    ...ComplexExampleTemplates[templateKeys[i]],
                    vlan: ComplexExampleTemplates[templateKeys[i]].vlan + i
                };
            }
            
            AppState.generateDepartmentInputs();
        }

        // Nouvelles fonctions pour les sc√©narios
        function loadScenario(scenarioNumber) {
            let network, mask, departments;
            
            switch(scenarioNumber) {
                case 1:
                    network = '10.0.0.0';
                    mask = '/24';
                    departments = [
                        { name: "Direction", hosts: 15, vlan: 10, description: "Direction avec marge croissance", color: "#2E7D32" },
                        { name: "Administration", hosts: 38, vlan: 20, description: "Administration avec marge", color: "#1565C0" },
                        { name: "Commercial", hosts: 23, vlan: 30, description: "Commercial avec marge", color: "#FF6D00" },
                        { name: "Production", hosts: 60, vlan: 40, description: "Production avec marge", color: "#6A1B9A" },
                        { name: "Serveurs", hosts: 12, vlan: 50, description: "Infrastructure serveurs", color: "#C62828" }
                    ];
                    break;
                case 2:
                    network = '172.20.0.0';
                    mask = '/16';
                    departments = [
                        { name: "Contr√¥le Industriel", hosts: 500, vlan: 10, description: "Capteurs et automation", color: "#2E7D32" },
                        { name: "R√©seau Invit√©s", hosts: 100, vlan: 20, description: "Acc√®s invit√©s", color: "#1565C0" },
                        { name: "Cam√©ras Surveillance", hosts: 80, vlan: 30, description: "S√©curit√© vid√©o", color: "#FF6D00" },
                        { name: "Supervision", hosts: 50, vlan: 40, description: "Postes de supervision", color: "#6A1B9A" },
                        { name: "Administration", hosts: 30, vlan: 50, description: "R√©seau administratif", color: "#C62828" },
                        { name: "Maintenance", hosts: 20, vlan: 60, description: "√âquipe maintenance", color: "#00838F" }
                    ];
                    break;
                case 3:
                    network = '10.10.0.0';
                    mask = '/16';
                    departments = [
                        { name: "R√©seau Patients", hosts: 200, vlan: 10, description: "√âquipements patients", color: "#2E7D32" },
                        { name: "Administration", hosts: 60, vlan: 20, description: "Personnel administratif", color: "#1565C0" },
                        { name: "Urgences", hosts: 75, vlan: 30, description: "Services urgences", color: "#FF6D00" },
                        { name: "Bloc Op√©ratoire", hosts: 40, vlan: 40, description: "Salles d'op√©ration", color: "#6A1B9A" },
                        { name: "Laboratoire", hosts: 30, vlan: 50, description: "Laboratoire d'analyses", color: "#C62828" },
                        { name: "Imagerie M√©dicale", hosts: 25, vlan: 60, description: "Radiologie et scanner", color: "#00838F" },
                        { name: "R√©seau Invit√©s", hosts: 50, vlan: 70, description: "Acc√®s visiteurs", color: "#5D4037" }
                    ];
                    break;
            }
            
            document.getElementById('network').value = network;
            document.getElementById('mask').value = mask;
            document.getElementById('subnetCount').value = departments.length;
            AppState.departments = departments;
            AppState.generateDepartmentInputs();
            showTab('lab');
        }

        function showScenarioSolution(scenarioNumber) {
            const solution = document.getElementById(`scenarioSolution${scenarioNumber}`);
            if (solution.style.display === 'none') {
                solution.style.display = 'block';
            } else {
                solution.style.display = 'none';
            }
        }

        function demonstrateProcess() {
            const network = document.getElementById('processNetwork').value;
            const mask = document.getElementById('processMask').value;
            const prefix = maskToPrefix(mask);
            
            let stepsHtml = `
                <div class="calculation-step">
                    <div class="step-title">üìù √âtape 1: Analyse du R√©seau</div>
                    <div class="step-content">
                        <strong>R√©seau:</strong> ${network}${mask}<br>
                        <strong>Adresses disponibles:</strong> ${Math.pow(2, 32 - prefix)}<br>
                        <strong>Bits h√¥te:</strong> ${32 - prefix}<br>
                        <strong>Plage:</strong> ${network} - ${intToIp(ipToInt(network) + Math.pow(2, 32 - prefix) - 1)}
                    </div>
                </div>
                
                <div class="calculation-step">
                    <div class="step-title">üî¢ √âtape 2: M√©thode de Calcul</div>
                    <div class="step-content">
                        <strong>Formule pour chaque sous-r√©seau:</strong><br>
                        1. H√¥tes + 2 (r√©seau + broadcast)<br>
                        2. Trouver 2<sup>n</sup> ‚â• r√©sultat<br>
                        3. Nouveau pr√©fixe = 32 - n<br>
                        4. Taille = 2<sup>n</sup> adresses
                    </div>
                </div>
                
                <div class="calculation-step">
                    <div class="step-title">üéØ √âtape 3: Exemple de Calcul</div>
                    <div class="step-content">
                        <strong>Pour 30 h√¥tes:</strong><br>
                        30 + 2 = 32 adresses n√©cessaires<br>
                        2<sup>5</sup> = 32 ‚Üí n = 5 bits h√¥te<br>
                        Nouveau pr√©fixe = 32 - 5 = /27<br>
                        Masque: 255.255.255.224<br>
                        H√¥tes utilisables: 30
                    </div>
                </div>
            `;
            
            document.getElementById('processSteps').innerHTML = stepsHtml;
        }

        function updateProgress(increment) {
            const progressBar = document.getElementById('learningProgress');
            let currentWidth = parseInt(progressBar.style.width) || 0;
            let newWidth = Math.min(currentWidth + increment, 100);
            progressBar.style.width = newWidth + '%';
            
            if (newWidth === 100) {
                setTimeout(() => {
                    alert('üéâ F√©licitations! Vous avez ma√Ætris√© le VLSM!');
                }, 500);
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            AppState.init();
            
            if (!localStorage.getItem('vlsm-learning-platform')) {
                setTimeout(loadEducationalExample, 500);
            }
        });
    </script>
</body>
</html>
