<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Infrastructure S√©curis√©e - Subnetting & Routage</title>
    <style>
        :root {
            --primary: #2E7D32;
            --secondary: #1565C0;
            --accent: #FF6D00;
            --security: #D32F2F;
            --warning: #FFA000;
            --success: #388E3C;
            --info: #0277BD;
            --dark: #263238;
            --light: #F5F5F5;
            --border: #BDBDBD;
            --cisco: #049FD9;
            --network: #7B1FA2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, #1B5E20 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0.5rem;
        }

        .badge.security {
            background: var(--security);
        }

        .badge.network {
            background: var(--network);
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .nav-tab:hover {
            background: var(--light);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
        }

        .tab-content {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .learning-objective {
            background: linear-gradient(135deg, #FFEAA7 0%, #FFD43B 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--accent);
        }

        .concept-explanation {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--info);
        }

        .security-note {
            background: linear-gradient(135deg, #FFCDD2 0%, #EF5350 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--security);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-weight: 600;
            color: var(--dark);
        }

        .input-group input, .input-group select {
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #1B5E20;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 125, 50, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #0D47A1;
            transform: translateY(-2px);
        }

        .btn-security {
            background: var(--security);
            color: white;
        }

        .btn-security:hover {
            background: #B71C1C;
            transform: translateY(-2px);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .config-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .config-tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.3);
            border: none;
            border-radius: 8px;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .config-tab.active {
            background: rgba(255,255,255,0.6);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .config-content {
            background: rgba(255,255,255,0.3);
            padding: 1.5rem;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .config-code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .config-comment {
            color: #6A9955;
        }

        .config-keyword {
            color: #569CD6;
        }

        .config-string {
            color: #CE9178;
        }

        .config-number {
            color: #B5CEA8;
        }

        .config-acl {
            color: #CE9178;
        }

        .table-responsive {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
        }

        .network-topology {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .topology-visual {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin: 2rem 0;
        }

        .router {
            background: var(--cisco);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
        }

        .firewall {
            background: var(--security);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
        }

        .subnet {
            background: var(--light);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 200px;
        }

        .connection {
            flex: 0.5;
            height: 4px;
            background: var(--border);
            position: relative;
        }

        .connection::after {
            content: '';
            position: absolute;
            right: -10px;
            top: -8px;
            width: 0;
            height: 0;
            border-left: 10px solid var(--border);
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
        }

        .acl-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .acl-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-top: 4px solid var(--security);
        }

        .protocol-badge {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0.2rem;
        }

        .protocol-tcp {
            background: #E3F2FD;
            color: #1565C0;
        }

        .protocol-udp {
            background: #E8F5E8;
            color: #2E7D32;
        }

        .protocol-icmp {
            background: #FFF3E0;
            color: #EF6C00;
        }

        .lab-environment {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .form-grid, .acl-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .topology-visual {
                flex-direction: column;
            }
            
            .connection {
                width: 4px;
                height: 50px;
            }
            
            .connection::after {
                right: -8px;
                top: auto;
                bottom: -10px;
                border-left: 10px solid transparent;
                border-right: 10px solid transparent;
                border-top: 10px solid var(--border);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì Formation Infrastructure S√©curis√©e</h1>
            <p class="subtitle">Subnetting, Routage, ACL et Filtres - Configuration Professionnelle Compl√®te</p>
            <div>
                <span class="badge">üîß Subnetting Avanc√©</span>
                <span class="badge">üö¶ Routage Inter-VLAN</span>
                <span class="badge security">üõ°Ô∏è ACL & S√©curit√©</span>
                <span class="badge network">üåê Filtres R√©seau</span>
            </div>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('subnetting')">
                üîß Subnetting
            </button>
            <button class="nav-tab" onclick="showTab('routing')">
                üö¶ Routage
            </button>
            <button class="nav-tab" onclick="showTab('acl')">
                üõ°Ô∏è ACL
            </button>
            <button class="nav-tab" onclick="showTab('filters')">
                üåê Filtres
            </button>
            <button class="nav-tab" onclick="showTab('lab')">
                üî¨ Laboratoire
            </button>
        </nav>

        <!-- Section Subnetting -->
        <section id="subnetting" class="tab-content active">
            <h2>üîß Subnetting Avanc√© et VLSM</h2>
            
            <div class="learning-objective">
                <h3>üéØ Ma√Ætrise du D√©coupage de R√©seaux</h3>
                <p>Apprenez les techniques professionnelles de subnetting et VLSM pour une allocation optimale des adresses IP</p>
            </div>

            <div class="concept-explanation">
                <h3>üìä Calculateur VLSM Professionnel</h3>
                <div class="form-grid">
                    <div class="input-group">
                        <label for="network">Adresse R√©seau Principal</label>
                        <input type="text" id="network" value="192.168.0.0" placeholder="192.168.0.0">
                    </div>
                    <div class="input-group">
                        <label for="mask">Masque CIDR Initial</label>
                        <input type="text" id="mask" value="/24" placeholder="/24">
                    </div>
                </div>

                <h4>üè¢ D√©partements de l'Entreprise</h4>
                <div class="form-grid" id="subnetInputs">
                    <div class="input-group">
                        <label>Direction</label>
                        <input type="number" id="subnet1Hosts" value="15" placeholder="H√¥tes">
                    </div>
                    <div class="input-group">
                        <label>Administration</label>
                        <input type="number" id="subnet2Hosts" value="45" placeholder="H√¥tes">
                    </div>
                    <div class="input-group">
                        <label>Production</label>
                        <input type="number" id="subnet3Hosts" value="100" placeholder="H√¥tes">
                    </div>
                    <div class="input-group">
                        <label>Commercial</label>
                        <input type="number" id="subnet4Hosts" value="30" placeholder="H√¥tes">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="calculateVLSM()">
                        üßÆ Calculer VLSM
                    </button>
                    <button class="btn btn-secondary" onclick="resetCalculator()">
                        üîÑ R√©initialiser
                    </button>
                </div>
            </div>

            <div id="vlsmResults" style="display: none;">
                <h3>üìä R√©sultats du Calcul VLSM</h3>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>D√©partement</th>
                                <th>Sous-r√©seau</th>
                                <th>Masque</th>
                                <th>H√¥tes</th>
                                <th>Plage Utilisable</th>
                                <th>Broadcast</th>
                            </tr>
                        </thead>
                        <tbody id="vlsmTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="security-note">
                <h4>üîê Bonnes Pratiques de S√©curit√©</h4>
                <ul>
                    <li>Utiliser des plages d'adresses priv√©es (RFC 1918)</li>
                    <li>Isoler les r√©seaux sensibles (DMZ, administration)</li>
                    <li>Documenter l'ensemble du plan d'adressage</li>
                    <li>Pr√©voir une marge de croissance de 20-30%</li>
                </ul>
            </div>
        </section>

        <!-- Section Routage -->
        <section id="routing" class="tab-content">
            <h2>üö¶ Routage Inter-VLAN Professionnel</h2>
            
            <div class="learning-objective">
                <h3>üéØ Architectures de Routage S√©curis√©es</h3>
                <p>Configuration compl√®te du routage inter-VLAN avec bonnes pratiques de s√©curit√©</p>
            </div>

            <div class="network-topology">
                <h3>üì° Architecture R√©seau d'Entreprise</h3>
                
                <div class="topology-visual">
                    <div class="subnet">
                        <h4>VLAN 10 - Direction</h4>
                        <p>192.168.10.0/27</p>
                        <p>30 h√¥tes</p>
                    </div>
                    <div class="connection"></div>
                    <div class="router">
                        <h4>Routeur Core</h4>
                        <p>Router-on-a-Stick</p>
                    </div>
                    <div class="connection"></div>
                    <div class="subnet">
                        <h4>VLAN 20 - Administration</h4>
                        <p>192.168.20.0/26</p>
                        <p>62 h√¥tes</p>
                    </div>
                </div>
                
                <div class="topology-visual">
                    <div class="subnet">
                        <h4>VLAN 30 - Production</h4>
                        <p>192.168.30.0/25</p>
                        <p>126 h√¥tes</p>
                    </div>
                    <div class="connection"></div>
                    <div class="firewall">
                        <h4>Firewall</h4>
                        <p>Zone-Based</p>
                    </div>
                    <div class="connection"></div>
                    <div class="subnet">
                        <h4>VLAN 40 - DMZ</h4>
                        <p>192.168.40.0/28</p>
                        <p>14 serveurs</p>
                    </div>
                </div>
            </div>

            <div class="config-tabs">
                <button class="config-tab active" onclick="showRoutingConfig('router')">üîÑ Routeur</button>
                <button class="config-tab" onclick="showRoutingConfig('switch')">üîÄ Switch</button>
                <button class="config-tab" onclick="showRoutingConfig('ospf')">üîÑ OSPF</button>
                <button class="config-tab" onclick="showRoutingConfig('security')">üõ°Ô∏è S√©curit√©</button>
            </div>

            <div id="router-config" class="config-content">
                <h4>üîÑ Configuration Routeur Principal (Router-on-a-Stick)</h4>
                <div class="config-code">
                    <span class="config-comment">! Configuration de base</span><br>
                    <span class="config-keyword">hostname</span> <span class="config-string">COREROUTER</span><br>
                    <span class="config-keyword">enable secret</span> <span class="config-string">Cisco123!</span><br>
                    <span class="config-keyword">no ip domain-lookup</span><br><br>
                    
                    <span class="config-comment">! Configuration sous-interfaces VLAN</span><br>
                    <span class="config-keyword">interface GigabitEthernet0/0.10</span><br>
                    <span class="config-keyword"> description VLAN-DIRECTION</span><br>
                    <span class="config-keyword"> encapsulation dot1Q 10</span><br>
                    <span class="config-keyword"> ip address 192.168.10.1 255.255.255.224</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-keyword">interface GigabitEthernet0/0.20</span><br>
                    <span class="config-keyword"> description VLAN-ADMINISTRATION</span><br>
                    <span class="config-keyword"> encapsulation dot1Q 20</span><br>
                    <span class="config-keyword"> ip address 192.168.20.1 255.255.255.192</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-keyword">interface GigabitEthernet0/0.30</span><br>
                    <span class="config-keyword"> description VLAN-PRODUCTION</span><br>
                    <span class="config-keyword"> encapsulation dot1Q 30</span><br>
                    <span class="config-keyword"> ip address 192.168.30.1 255.255.255.128</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-comment">! Activation du routage</span><br>
                    <span class="config-keyword">ip routing</span><br>
                    <span class="config-keyword">!</span><br>
                </div>
            </div>

            <div id="switch-config" class="config-content" style="display: none;">
                <h4>üîÄ Configuration Switch Core</h4>
                <div class="config-code">
                    <span class="config-comment">! Configuration VLANs</span><br>
                    <span class="config-keyword">vlan 10</span><br>
                    <span class="config-keyword"> name DIRECTION</span><br>
                    <span class="config-keyword">!</span><br>
                    <span class="config-keyword">vlan 20</span><br>
                    <span class="config-keyword"> name ADMINISTRATION</span><br>
                    <span class="config-keyword">!</span><br>
                    <span class="config-keyword">vlan 30</span><br>
                    <span class="config-keyword"> name PRODUCTION</span><br>
                    <span class="config-keyword">!</span><br>
                    <span class="config-keyword">vlan 99</span><br>
                    <span class="config-keyword"> name NATIVE</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-comment">! Configuration ports d'acc√®s</span><br>
                    <span class="config-keyword">interface range FastEthernet0/1-12</span><br>
                    <span class="config-keyword"> switchport mode access</span><br>
                    <span class="config-keyword"> switchport access vlan 10</span><br>
                    <span class="config-keyword"> spanning-tree portfast</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-comment">! Configuration trunk vers routeur</span><br>
                    <span class="config-keyword">interface GigabitEthernet0/1</span><br>
                    <span class="config-keyword"> switchport mode trunk</span><br>
                    <span class="config-keyword"> switchport trunk native vlan 99</span><br>
                    <span class="config-keyword"> switchport trunk allowed vlan 10,20,30,99</span><br>
                    <span class="config-keyword">!</span><br>
                </div>
            </div>

            <div id="ospf-config" class="config-content" style="display: none;">
                <h4>üîÑ Configuration OSPF Multi-Aires</h4>
                <div class="config-code">
                    <span class="config-comment">! Configuration OSPF</span><br>
                    <span class="config-keyword">router ospf 1</span><br>
                    <span class="config-keyword"> router-id 1.1.1.1</span><br>
                    <span class="config-keyword"> passive-interface default</span><br>
                    <span class="config-keyword"> no passive-interface GigabitEthernet0/0</span><br>
                    <span class="config-keyword"> network 192.168.10.0 0.0.0.31 area 0</span><br>
                    <span class="config-keyword"> network 192.168.20.0 0.0.0.63 area 0</span><br>
                    <span class="config-keyword"> network 192.168.30.0 0.0.0.127 area 0</span><br>
                    <span class="config-keyword"> auto-cost reference-bandwidth 1000</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-comment">! S√©curisation OSPF</span><br>
                    <span class="config-keyword">interface GigabitEthernet0/0</span><br>
                    <span class="config-keyword"> ip ospf authentication message-digest</span><br>
                    <span class="config-keyword"> ip ospf message-digest-key 1 md5 OSPF_SECURE_KEY</span><br>
                    <span class="config-keyword">!</span><br>
                </div>
            </div>

            <div id="routing-security-config" class="config-content" style="display: none;">
                <h4>üõ°Ô∏è S√©curisation du Routage</h4>
                <div class="config-code">
                    <span class="config-comment">! Control Plane Policing</span><br>
                    <span class="config-keyword">class-map match-any CONTROL_PLANE_PROTOCOLS</span><br>
                    <span class="config-keyword"> match access-group name OSPF</span><br>
                    <span class="config-keyword"> match access-group name BGP</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-keyword">policy-map CONTROL_PLANE_POLICY</span><br>
                    <span class="config-keyword"> class CONTROL_PLANE_PROTOCOLS</span><br>
                    <span class="config-keyword">  police 8000 conform-action transmit exceed-action drop</span><br>
                    <span class="config-keyword">!</span><br><br>
                    
                    <span class="config-keyword">control-plane</span><br>
                    <span class="config-keyword"> service-policy input CONTROL_PLANE_POLICY</span><br>
                    <span class="config-keyword">!</span><br>
                </div>
            </div>
        </section>

        <!-- Section ACL -->
        <section id="acl" class="tab-content">
            <h2>üõ°Ô∏è Listes de Contr√¥le d'Acc√®s (ACL)</h2>
            
            <div class="learning-objective">
                <h3>üéØ Contr√¥le d'Acc√®s Granulaire</h3>
                <p>Impl√©mentation d'ACL standards, √©tendues et nomm√©es pour s√©curiser le trafic r√©seau</p>
            </div>

            <div class="acl-grid">
                <div class="acl-card">
                    <h4>üîí ACL Standard</h4>
                    <div class="config-code">
                        <span class="config-comment">! ACL Standard - Contr√¥le bas√© sur l'adresse source</span><br>
                        <span class="config-keyword">access-list 10 permit 192.168.10.0 0.0.0.31</span><br>
                        <span class="config-keyword">access-list 10 permit 192.168.20.0 0.0.0.63</span><br>
                        <span class="config-keyword">access-list 10 deny any</span><br><br>
                        
                        <span class="config-comment">! Application sur l'interface</span><br>
                        <span class="config-keyword">interface GigabitEthernet0/0</span><br>
                        <span class="config-keyword"> ip access-group 10 in</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div class="acl-card">
                    <h4>üîê ACL √âtendue</h4>
                    <div class="config-code">
                        <span class="config-comment">! ACL √âtendue - Contr√¥le source/destination + protocole</span><br>
                        <span class="config-keyword">access-list 101 permit tcp 192.168.10.0 0.0.0.31 any eq 80</span><br>
                        <span class="config-keyword">access-list 101 permit tcp 192.168.10.0 0.0.0.31 any eq 443</span><br>
                        <span class="config-keyword">access-list 101 permit udp 192.168.10.0 0.0.0.31 any eq 53</span><br>
                        <span class="config-keyword">access-list 101 deny ip any any</span><br><br>
                        
                        <span class="config-comment">! Application sur l'interface</span><br>
                        <span class="config-keyword">interface GigabitEthernet0/0.10</span><br>
                        <span class="config-keyword"> ip access-group 101 in</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div class="acl-card">
                    <h4>üè∑Ô∏è ACL Nomm√©e</h4>
                    <div class="config-code">
                        <span class="config-comment">! ACL Nomm√©e - Plus explicite</span><br>
                        <span class="config-keyword">ip access-list extended VLAN10-OUTBOUND</span><br>
                        <span class="config-keyword"> permit tcp 192.168.10.0 0.0.0.31 any eq www</span><br>
                        <span class="config-keyword"> permit tcp 192.168.10.0 0.0.0.31 any eq 443</span><br>
                        <span class="config-keyword"> permit udp 192.168.10.0 0.0.0.31 any eq domain</span><br>
                        <span class="config-keyword"> deny ip any any log</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-comment">! Application</span><br>
                        <span class="config-keyword">interface GigabitEthernet0/0.10</span><br>
                        <span class="config-keyword"> ip access-group VLAN10-OUTBOUND out</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div class="acl-card">
                    <h4>üõ°Ô∏è ACL de R√©flexion</h4>
                    <div class="config-code">
                        <span class="config-comment">! ACL R√©flexive - Pour les sessions √©tablies</span><br>
                        <span class="config-keyword">ip access-list extended OUTBOUND-TRAFFIC</span><br>
                        <span class="config-keyword"> permit tcp 192.168.0.0 0.0.255.255 any reflect TCP-TRAFFIC</span><br>
                        <span class="config-keyword"> permit udp 192.168.0.0 0.0.255.255 any reflect UDP-TRAFFIC</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">ip access-list extended INBOUND-TRAFFIC</span><br>
                        <span class="config-keyword"> evaluate TCP-TRAFFIC</span><br>
                        <span class="config-keyword"> evaluate UDP-TRAFFIC</span><br>
                        <span class="config-keyword"> deny ip any any</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>
            </div>

            <div class="security-note">
                <h4>üìã Best Practices ACL</h4>
                <ul>
                    <li>Toujours terminer par un "deny ip any any" implicite ou explicite</li>
                    <li>Placer les r√®gles les plus sp√©cifiques en premier</li>
                    <li>Utiliser des ACL nomm√©es pour une meilleure documentation</li>
                    <li>Auditer r√©guli√®rement les ACL avec "show access-lists"</li>
                    <li>Utiliser le logging pour le d√©bogage (attention au volume)</li>
                </ul>
            </div>
        </section>

        <!-- Section Filtres -->
        <section id="filters" class="tab-content">
            <h2>üåê Filtres et Politiques de S√©curit√©</h2>
            
            <div class="learning-objective">
                <h3>üéØ Filtrage Avanc√© du Trafic</h3>
                <p>Configuration de filtres bas√©s sur le contenu, politiques de s√©curit√© et protection contre les attaques</p>
            </div>

            <div class="concept-explanation">
                <h3>üö´ Filtrage par Protocole et Port</h3>
                
                <div class="config-tabs">
                    <button class="config-tab active" onclick="showFilterConfig('protocol')">üì° Protocoles</button>
                    <button class="config-tab" onclick="showFilterConfig('content')">üîç Contenu</button>
                    <button class="config-tab" onclick="showFilterConfig('dos')">üõ°Ô∏è Anti-DoS</button>
                    <button class="config-tab" onclick="showFilterConfig('zone')">üè∑Ô∏è Zone-Based</button>
                </div>

                <div id="protocol-filter" class="config-content">
                    <h4>üì° Filtrage par Protocole</h4>
                    <div class="config-code">
                        <span class="config-comment">! Bloquer les protocoles non d√©sir√©s</span><br>
                        <span class="config-keyword">ip access-list extended BLOCK-DANGEROUS-PROTOCOLS</span><br>
                        <span class="config-keyword"> deny tcp any any eq 23</span><br>
                        <span class="config-comment"> ! Bloquer Telnet</span><br>
                        <span class="config-keyword"> deny tcp any any eq 21</span><br>
                        <span class="config-comment"> ! Bloquer FTP</span><br>
                        <span class="config-keyword"> deny udp any any eq 161</span><br>
                        <span class="config-comment"> ! Bloquer SNMP</span><br>
                        <span class="config-keyword"> deny tcp any any eq 25</span><br>
                        <span class="config-comment"> ! Bloquer SMTP sortant non autoris√©</span><br>
                        <span class="config-keyword"> permit ip any any</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div id="content-filter" class="config-content" style="display: none;">
                    <h4>üîç Filtrage de Contenu (NBAR)</h4>
                    <div class="config-code">
                        <span class="config-comment">! D√©tection d'applications avec NBAR</span><br>
                        <span class="config-keyword">class-map match-any P2P-APPLICATIONS</span><br>
                        <span class="config-keyword"> match protocol bittorrent</span><br>
                        <span class="config-keyword"> match protocol edonkey</span><br>
                        <span class="config-keyword"> match protocol skype</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">policy-map BLOCK-P2P</span><br>
                        <span class="config-keyword"> class P2P-APPLICATIONS</span><br>
                        <span class="config-keyword">  drop</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">interface GigabitEthernet0/0</span><br>
                        <span class="config-keyword"> service-policy input BLOCK-P2P</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div id="dos-filter" class="config-content" style="display: none;">
                    <h4>üõ°Ô∏è Protection Anti-DoS</h4>
                    <div class="config-code">
                        <span class="config-comment">! Protection contre les floods TCP</span><br>
                        <span class="config-keyword">ip tcp intercept mode intercept</span><br>
                        <span class="config-keyword">ip tcp intercept list 110</span><br>
                        <span class="config-keyword">ip tcp intercept drop-mode random</span><br>
                        <span class="config-keyword">ip tcp intercept watch-timeout 30</span><br><br>
                        
                        <span class="config-comment">! ACL pour les serveurs √† prot√©ger</span><br>
                        <span class="config-keyword">access-list 110 permit tcp any host 192.168.40.10</span><br>
                        <span class="config-keyword">access-list 110 permit tcp any host 192.168.40.11</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>

                <div id="zone-filter" class="config-content" style="display: none;">
                    <h4>üè∑Ô∏è Zone-Based Firewall</h4>
                    <div class="config-code">
                        <span class="config-comment">! Configuration ZBFW</span><br>
                        <span class="config-keyword">zone security INSIDE</span><br>
                        <span class="config-keyword">zone security OUTSIDE</span><br>
                        <span class="config-keyword">zone security DMZ</span><br><br>
                        
                        <span class="config-keyword">class-map type inspect INSIDE-TO-DMZ</span><br>
                        <span class="config-keyword"> match access-group name INSIDE-DMZ-TRAFFIC</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">policy-map type inspect INSIDE-TO-DMZ-POLICY</span><br>
                        <span class="config-keyword"> class type inspect INSIDE-TO-DMZ</span><br>
                        <span class="config-keyword">  inspect</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">zone-pair security INSIDE-DMZ source INSIDE destination DMZ</span><br>
                        <span class="config-keyword"> service-policy type inspect INSIDE-TO-DMZ-POLICY</span><br>
                        <span class="config-keyword">!</span><br>
                    </div>
                </div>
            </div>

            <div class="security-note">
                <h4>üö® Monitoring et Audit</h4>
                <div class="config-code">
                    <span class="config-comment">! Commandes de monitoring</span><br>
                    <span class="config-keyword">show access-lists</span><br>
                    <span class="config-comment"> ! Voir les ACL et leurs hits</span><br>
                    <span class="config-keyword">show policy-map interface</span><br>
                    <span class="config-comment"> ! Voir les politiques appliqu√©es</span><br>
                    <span class="config-keyword">show zone-pair security</span><br>
                    <span class="config-comment"> ! Voir les paires de zones</span><br>
                    <span class="config-keyword">show ip nbar protocol-discovery</span><br>
                    <span class="config-comment"> ! Voir le trafic d√©tect√© par NBAR</span><br>
                </div>
            </div>
        </section>

        <!-- Section Laboratoire -->
        <section id="lab" class="tab-content">
            <h2>üî¨ Laboratoire Pratique Complet</h2>
            
            <div class="learning-objective">
                <h3>üéØ Sc√©nario d'Entreprise R√©el</h3>
                <p>Mettez en pratique toutes les comp√©tences acquises sur un sc√©nario d'entreprise complet</p>
            </div>

            <div class="lab-environment">
                <h3>üè¢ Soci√©t√© "SecureCorp"</h3>
                <p><strong>Contexte:</strong> Une entreprise de 200 employ√©s avec 4 d√©partements et une DMZ</p>
                
                <div class="form-grid">
                    <div class="input-group">
                        <h4>üìã Exigences M√©tier</h4>
                        <ul>
                            <li>Direction: Acc√®s internet complet</li>
                            <li>Administration: Acc√®s aux serveurs + internet</li>
                            <li>Production: Pas d'acc√®s internet</li>
                            <li>DMZ: Serveurs web accessibles depuis l'ext√©rieur</li>
                        </ul>
                    </div>
                    
                    <div class="input-group">
                        <h4>üõ°Ô∏è Exigences S√©curit√©</h4>
                        <ul>
                            <li>Isolation des d√©partements</li>
                            <li>Filtrage du trafic sortant</li>
                            <li>Protection des serveurs</li>
                            <li>Journalisation des incidents</li>
                        </ul>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="showLabSolution()">
                        üß© Voir la Solution Compl√®te
                    </button>
                    <button class="btn btn-security" onclick="showLabConfig()">
                        ‚öôÔ∏è Configurations D√©taill√©es
                    </button>
                </div>

                <div id="labSolution" style="display: none; margin-top: 2rem;">
                    <h4>üèóÔ∏è Architecture Propos√©e</h4>
                    <div class="config-code">
                        <span class="config-comment">! Topologie:</span><br>
                        <span class="config-comment">! Internet -- Firewall -- Routeur -- Switch Core</span><br>
                        <span class="config-comment">!                    |-- DMZ</span><br><br>
                        
                        <span class="config-comment">! VLANs:</span><br>
                        <span class="config-comment">! VLAN 10: Direction (192.168.10.0/27)</span><br>
                        <span class="config-comment">! VLAN 20: Administration (192.168.20.0/26)</span><br>
                        <span class="config-comment">! VLAN 30: Production (192.168.30.0/25)</span><br>
                        <span class="config-comment">! VLAN 40: DMZ (192.168.40.0/28)</span><br>
                        <span class="config-comment">! VLAN 99: Native</span><br>
                    </div>
                </div>

                <div id="labConfig" style="display: none; margin-top: 2rem;">
                    <h4>‚öôÔ∏è Configuration Compl√®te</h4>
                    <div class="config-code">
                        <span class="config-comment">! === CONFIGURATION ROUTEUR PRINCIPAL ===</span><br>
                        <span class="config-keyword">hostname COREROUTER</span><br>
                        <span class="config-keyword">enable secret</span> <span class="config-string">$tr0ngP@ss</span><br><br>
                        
                        <span class="config-comment">! Sous-interfaces VLAN</span><br>
                        <span class="config-keyword">interface GigabitEthernet0/0.10</span><br>
                        <span class="config-keyword"> encapsulation dot1Q 10</span><br>
                        <span class="config-keyword"> ip address 192.168.10.1 255.255.255.224</span><br>
                        <span class="config-keyword"> ip access-group VLAN10-IN in</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-keyword">interface GigabitEthernet0/0.20</span><br>
                        <span class="config-keyword"> encapsulation dot1Q 20</span><br>
                        <span class="config-keyword"> ip address 192.168.20.1 255.255.255.192</span><br>
                        <span class="config-keyword"> ip access-group VLAN20-IN in</span><br>
                        <span class="config-keyword">!</span><br><br>
                        
                        <span class="config-comment">! ... Configuration compl√®te continue ...</span><br>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Fonction pour afficher les onglets
        function showTab(tabId) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Fonction pour afficher les configurations de routage
        function showRoutingConfig(type) {
            document.querySelectorAll('.config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.config-content').forEach(content => {
                content.style.display = 'none';
            });
            
            event.target.classList.add('active');
            document.getElementById(`${type}-config`).style.display = 'block';
        }

        // Fonction pour afficher les configurations de filtres
        function showFilterConfig(type) {
            document.querySelectorAll('.config-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.config-content').forEach(content => {
                content.style.display = 'none';
            });
            
            event.target.classList.add('active');
            document.getElementById(`${type}-filter`).style.display = 'block';
        }

        // Fonction pour calculer le VLSM
        function calculateVLSM() {
            const network = document.getElementById('network').value;
            const mask = document.getElementById('mask').value;
            
            const subnets = [
                { name: "Direction", hosts: parseInt(document.getElementById('subnet1Hosts').value) },
                { name: "Administration", hosts: parseInt(document.getElementById('subnet2Hosts').value) },
                { name: "Production", hosts: parseInt(document.getElementById('subnet3Hosts').value) },
                { name: "Commercial", hosts: parseInt(document.getElementById('subnet4Hosts').value) }
            ];

            if (subnets.some(subnet => isNaN(subnet.hosts) || subnet.hosts <= 0)) {
                alert('Veuillez entrer des valeurs valides pour tous les d√©partements');
                return;
            }

            // Trier par taille d√©croissante
            const sortedSubnets = [...subnets].sort((a, b) => b.hosts - a.hosts);
            
            let currentAddress = ipToInt(network);
            const prefix = parseInt(mask.substring(1));
            
            let html = '';
            
            sortedSubnets.forEach(subnet => {
                const neededSize = subnet.hosts + 2;
                const hostBits = Math.ceil(Math.log2(neededSize));
                const newPrefix = 32 - hostBits;
                const subnetSize = Math.pow(2, hostBits);
                
                const networkAddr = intToIp(currentAddress);
                const firstUsable = intToIp(currentAddress + 1);
                const lastUsable = intToIp(currentAddress + subnetSize - 2);
                const broadcast = intToIp(currentAddress + subnetSize - 1);
                
                html += `
                    <tr>
                        <td>${subnet.name}</td>
                        <td>${networkAddr}</td>
                        <td>/${newPrefix}</td>
                        <td>${subnet.hosts}</td>
                        <td>${firstUsable} - ${lastUsable}</td>
                        <td>${broadcast}</td>
                    </tr>
                `;
                
                currentAddress += subnetSize;
            });
            
            document.getElementById('vlsmTable').innerHTML = html;
            document.getElementById('vlsmResults').style.display = 'block';
        }

        // Fonction pour r√©initialiser le calculateur
        function resetCalculator() {
            document.getElementById('network').value = '192.168.0.0';
            document.getElementById('mask').value = '/24';
            document.getElementById('subnet1Hosts').value = '15';
            document.getElementById('subnet2Hosts').value = '45';
            document.getElementById('subnet3Hosts').value = '100';
            document.getElementById('subnet4Hosts').value = '30';
            document.getElementById('vlsmResults').style.display = 'none';
        }

        // Fonctions utilitaires pour les adresses IP
        function ipToInt(ip) {
            return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) >>> 0;
        }

        function intToIp(int) {
            return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
        }

        // Fonctions pour le laboratoire
        function showLabSolution() {
            document.getElementById('labSolution').style.display = 'block';
            document.getElementById('labConfig').style.display = 'none';
        }

        function showLabConfig() {
            document.getElementById('labConfig').style.display = 'block';
            document.getElementById('labSolution').style.display = 'none';
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            showRoutingConfig('router');
            showFilterConfig('protocol');
        });
    </script>
</body>
</html>
