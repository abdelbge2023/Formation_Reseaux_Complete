<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation R√©seaux - Subnetting Am√©lior√©</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --text: #34495e;
            --border: #bdc3c7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--text);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
        }

        header h1 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .level-badge {
            display: inline-block;
            padding: 0.5rem 1.2rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 1rem 0;
            color: white;
            background: var(--accent);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .content-section {
            padding: 2rem;
        }

        h2 {
            color: var(--primary);
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 0.5rem;
        }

        h3 {
            color: var(--secondary);
            font-size: 1.6rem;
            margin: 1.5rem 0 1rem 0;
        }

        h4 {
            color: var(--primary);
            font-size: 1.3rem;
            margin: 1rem 0;
        }

        .concept-card {
            background: var(--light);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .step-by-step {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .exercise {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .practice-lab {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .critical-case {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .input-group label {
            font-weight: 600;
            color: inherit;
            font-size: 1.1rem;
        }

        .input-group input, .input-group select, .input-group textarea {
            padding: 12px 15px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            color: var(--dark);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .btn-intermediate { 
            background: var(--secondary); 
            color: white; 
        }

        .btn-advanced { 
            background: var(--accent); 
            color: white; 
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .calculation-steps {
            background: rgba(255,255,255,0.95);
            color: var(--dark);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .step {
            margin-bottom: 1.2rem;
            padding: 1.2rem;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .step strong {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .subnet-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 1.5rem 0;
            color: var(--dark);
        }

        .subnet-table th, .subnet-table td {
            padding: 1.2rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .subnet-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .subnet-table tr:nth-child(even) {
            background: var(--light);
        }

        .binary-visual {
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
            margin: 1.5rem 0;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .bit {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.9rem;
            background: #e0e0e0;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .bit.network { background: var(--primary); color: white; }
        .bit.subnet { background: var(--secondary); color: white; }
        .bit.host { background: var(--accent); color: white; }

        .octet-separator {
            width: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark);
            font-size: 1.2rem;
        }

        .hint {
            background: rgba(255,255,255,0.9);
            color: var(--dark);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--warning);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .solution {
            background: rgba(255,255,255,0.95);
            color: var(--dark);
            padding: 2rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .term-definition {
            background: rgba(255,255,255,0.9);
            color: var(--dark);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--secondary);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        strong {
            color: var(--primary);
        }

        @media (max-width: 768px) {
            .container { margin: 10px; }
            header h1 { font-size: 2rem; }
            header p { font-size: 1.1rem; }
            .form-grid { grid-template-columns: 1fr; }
            .button-group { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .bit { width: 35px; height: 35px; font-size: 0.8rem; }
            .content-section { padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîß Subnetting Avanc√©</h1>
            <p>Ma√Ætrisez l'art de diviser les r√©seaux IP avec pr√©cision et efficacit√©</p>
            <span class="level-badge">Niveau Interm√©diaire</span>
        </header>

        <section class="content-section">
            <h2>üéØ Principes Fondamentaux du Sous-r√©seautage</h2>

            <div class="concept-card">
                <h3>üìö D√©finitions Essentielles</h3>
                
                <div class="term-definition">
                    <h4>üåê Qu'est-ce qu'un Sous-r√©seau ?</h4>
                    <p><strong>D√©finition :</strong> Division d'un r√©seau IP unique en plusieurs r√©seaux logiques plus petits.</p>
                    <p><strong>Objectifs :</strong></p>
                    <ul>
                        <li>Optimiser l'utilisation des adresses IP</li>
                        <li>Am√©liorer la s√©curit√© en isolant les segments</li>
                        <li>R√©duire la congestion du trafic r√©seau</li>
                        <li>Faciliter la gestion et la maintenance</li>
                    </ul>
                    <p><strong>Exemple critique :</strong> Dans un campus universitaire, s√©parer les r√©seaux des diff√©rentes facult√©s (Sciences, Lettres, M√©decine) pour isoler les probl√®mes et contr√¥ler les acc√®s.</p>
                </div>

                <div class="term-definition">
                    <h4>üé≠ Comprendre le Masque de Sous-r√©seau</h4>
                    <p><strong>D√©finition :</strong> Valeur binaire de 32 bits qui d√©termine quelle partie d'une adresse IP identifie le r√©seau et quelle partie identifie l'h√¥te.</p>
                    <p><strong>Notations courantes :</strong></p>
                    <ul>
                        <li><strong>CIDR :</strong> /24 (24 bits r√©seau)</li>
                        <li><strong>D√©cimal :</strong> 255.255.255.0</li>
                        <li><strong>Binaire :</strong> 11111111.11111111.11111111.00000000</li>
                    </ul>
                    <p><strong>Exemple critique :</strong> Un masque /26 (255.255.255.192) signifie 26 bits pour le r√©seau et 6 bits pour les h√¥tes, permettant 64 adresses par sous-r√©seau dont 62 utilisables.</p>
                </div>

                <div class="term-definition">
                    <h4>üî¢ Les Adresses Sp√©ciales</h4>
                    <p><strong>Adresse de R√©seau :</strong> Premi√®re adresse du sous-r√©seau (bits h√¥tes √† 0)</p>
                    <p><strong>Adresse de Broadcast :</strong> Derni√®re adresse du sous-r√©seau (bits h√¥tes √† 1)</p>
                    <p><strong>Adresses Utilisables :</strong> Toutes les adresses entre l'adresse r√©seau et l'adresse broadcast</p>
                    <p><strong>Exemple :</strong> Pour le sous-r√©seau 192.168.1.0/26 ‚Üí R√©seau: 192.168.1.0, Broadcast: 192.168.1.63, Utilisables: 192.168.1.1 √† 192.168.1.62</p>
                </div>
            </div>

            <div class="step-by-step">
                <h3>üìñ Exemple D√©taill√© : Division d'un /24 en 4 Sous-r√©seaux</h3>
                <p><strong>R√©seau de d√©part :</strong> 192.168.1.0/24 (256 adresses)</p>
                
                <div class="calculation-steps">
                    <div class="step">
                        <strong>√âtape 1 : D√©terminer le nombre de bits de sous-r√©seau</strong><br>
                        Besoin : 4 sous-r√©seaux ‚Üí 2¬≤ = 4 ‚Üí 2 bits suppl√©mentaires n√©cessaires
                    </div>
                    <div class="step">
                        <strong>√âtape 2 : Calculer le nouveau masque</strong><br>
                        Masque original : /24 + 2 bits = /26<br>
                        Nouveau masque : 255.255.255.192
                    </div>
                    <div class="step">
                        <strong>√âtape 3 : Calculer la taille des sous-r√©seaux</strong><br>
                        Bits h√¥te restants : 32 - 26 = 6 bits<br>
                        Adresses par sous-r√©seau : 2‚Å∂ = 64 adresses<br>
                        Adresses utilisables : 64 - 2 = 62 adresses
                    </div>
                    <div class="step">
                        <strong>√âtape 4 : D√©terminer l'incr√©ment</strong><br>
                        Incr√©ment entre sous-r√©seaux : 256 - 192 = 64
                    </div>
                </div>

                <table class="subnet-table">
                    <thead>
                        <tr>
                            <th>Sous-r√©seau</th>
                            <th>Adresse R√©seau</th>
                            <th>Premi√®re IP</th>
                            <th>Derni√®re IP</th>
                            <th>Broadcast</th>
                            <th>Masque</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#1</td>
                            <td>192.168.1.0</td>
                            <td>192.168.1.1</td>
                            <td>192.168.1.62</td>
                            <td>192.168.1.63</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>#2</td>
                            <td>192.168.1.64</td>
                            <td>192.168.1.65</td>
                            <td>192.168.1.126</td>
                            <td>192.168.1.127</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>#3</td>
                            <td>192.168.1.128</td>
                            <td>192.168.1.129</td>
                            <td>192.168.1.190</td>
                            <td>192.168.1.191</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>#4</td>
                            <td>192.168.1.192</td>
                            <td>192.168.1.193</td>
                            <td>192.168.1.254</td>
                            <td>192.168.1.255</td>
                            <td>/26</td>
                        </tr>
                    </tbody>
                </table>

                <div class="binary-visual">
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div>
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div>
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div>
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    
                    <div class="bit subnet">S</div><div class="bit subnet">S</div><div class="bit host">H</div><div class="bit host">H</div>
                    <div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H">
                </div>
                <p style="text-align: center; margin-top: 1rem;"><em>N = Network (24 bits) | S = Subnet (2 bits) | H = Host (6 bits)</em></p>
            </div>

            <div class="exercise">
                <h3>üí™ Exercice Pratique : Planification de Sous-r√©seaux</h3>
                <p><strong>Sc√©nario :</strong> Vous devez cr√©er des sous-r√©seaux √† partir du r√©seau 172.16.0.0/16 pour r√©pondre aux besoins suivants :</p>
                
                <div class="form-grid">
                    <div class="input-group">
                        <label>üè¢ Site A (500 h√¥tes)</label>
                        <input type="text" id="siteA" placeholder="172.16.0.0/?">
                    </div>
                    <div class="input-group">
                        <label>üíº Site B (200 h√¥tes)</label>
                        <input type="text" id="siteB" placeholder="172.16.?.0/?">
                    </div>
                    <div class="input-group">
                        <label>üè≠ Site C (50 h√¥tes)</label>
                        <input type="text" id="siteC" placeholder="172.16.?.0/?">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-intermediate" onclick="checkSubnetExercise()">
                        ‚úÖ V√©rifier la Solution
                    </button>
                    <button class="btn btn-advanced" onclick="showHint('subnetHint')">
                        üí° Aide M√©moire
                    </button>
                </div>

                <div id="subnetHint" class="hint">
                    <h4>üí° Conseils pour R√©soudre l'Exercice</h4>
                    <ul>
                        <li><strong>Site A (500 h√¥tes) :</strong> 512 adresses n√©cessaires (2‚Åπ) ‚Üí Masque /23</li>
                        <li><strong>Site B (200 h√¥tes) :</strong> 256 adresses n√©cessaires (2‚Å∏) ‚Üí Masque /24</li>
                        <li><strong>Site C (50 h√¥tes) :</strong> 64 adresses n√©cessaires (2‚Å∂) ‚Üí Masque /26</li>
                        <li><strong>Approche :</strong> Commencez par le plus grand sous-r√©seau et progressez vers les plus petits</li>
                    </ul>
                </div>

                <div id="subnetSolution" class="solution">
                    <h4>‚úÖ Solution Compl√®te de l'Exercice</h4>
                    <table class="subnet-table">
                        <thead>
                            <tr>
                                <th>Site</th>
                                <th>H√¥tes requis</th>
                                <th>Sous-r√©seau</th>
                                <th>Masque</th>
                                <th>Plage Utilisable</th>
                                <th>Adresses</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Site A</td>
                                <td>500</td>
                                <td>172.16.0.0/23</td>
                                <td>255.255.254.0</td>
                                <td>172.16.0.1 - 172.16.1.254</td>
                                <td>510</td>
                            </tr>
                            <tr>
                                <td>Site B</td>
                                <td>200</td>
                                <td>172.16.2.0/24</td>
                                <td>255.255.255.0</td>
                                <td>172.16.2.1 - 172.16.2.254</td>
                                <td>254</td>
                            </tr>
                            <tr>
                                <td>Site C</td>
                                <td>50</td>
                                <td>172.16.3.0/26</td>
                                <td>255.255.255.192</td>
                                <td>172.16.3.1 - 172.16.3.62</td>
                                <td>62</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="practice-lab">
                <h3>üî¨ Laboratoire : Calculateur VLSM Interactif</h3>
                <p>Le <strong>VLSM (Variable Length Subnet Mask)</strong> permet d'optimiser l'adressage IP en utilisant des masques de longueur variable selon les besoins de chaque sous-r√©seau.</p>
                
                <div class="form-grid">
                    <div class="input-group">
                        <label>üåê R√©seau principal</label>
                        <input type="text" id="vlsmNetwork" value="192.168.0.0" placeholder="ex: 192.168.0.0">
                    </div>
                    <div class="input-group">
                        <label>üé≠ Masque initial</label>
                        <select id="vlsmMask">
                            <option value="16">/16 (65536 adresses)</option>
                            <option value="24" selected>/24 (256 adresses)</option>
                            <option value="22">/22 (1024 adresses)</option>
                        </select>
                    </div>
                </div>

                <h4>üìã Configuration des Sous-r√©seaux</h4>
                <div class="form-grid">
                    <div class="input-group">
                        <label>üèõÔ∏è Direction</label>
                        <input type="number" id="subnetHosts1" value="30" min="1" max="1000">
                    </div>
                    <div class="input-group">
                        <label>üë• Administration</label>
                        <input type="number" id="subnetHosts2" value="60" min="1" max="1000">
                    </div>
                    <div class="input-group">
                        <label>üè≠ Production</label>
                        <input type="number" id="subnetHosts3" value="120" min="1" max="1000">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-advanced" onclick="calculateVLSM()">
                        üßÆ Calculer le Plan VLSM
                    </button>
                    <button class="btn btn-intermediate" onclick="addSubnetField()">
                        ‚ûï Ajouter un Service
                    </button>
                </div>

                <div id="vlsmResults"></div>
            </div>

            <div class="critical-case">
                <h3>‚ö†Ô∏è Cas Critiques : Probl√®mes Courants et Solutions</h3>
                
                <div class="term-definition">
                    <h4>üö´ Chevauchement de Sous-r√©seaux</h4>
                    <p><strong>Sc√©nario :</strong> Configuration de 192.168.1.0/26 et 192.168.1.64/25</p>
                    <p><strong>Probl√®me :</strong> Les plages d'adresses se chevauchent (192.168.1.64 appartient aux deux sous-r√©seaux)</p>
                    <p><strong>Solution :</strong> Toujours v√©rifier math√©matiquement que les sous-r√©seaux sont disjoints</p>
                </div>

                <div class="term-definition">
                    <h4>üìâ Sous-dimensionnement</h4>
                    <p><strong>Sc√©nario :</strong> Attribution d'un /29 (6 h√¥tes) √† un service qui en n√©cessite 15</p>
                    <p><strong>Probl√®me :</strong> Manque d'adresses IP disponibles pour les nouveaux √©quipements</p>
                    <p><strong>Solution :</strong> Pr√©voir une marge de croissance de 20-30% et utiliser VLSM</p>
                </div>

                <div class="term-definition">
                    <h4>üìà Surdimensionnement</h4>
                    <p><strong>Sc√©nario :</strong> Attribution d'un /24 (254 h√¥tes) √† une liaison WAN de 2 routeurs</p>
                    <p><strong>Probl√®me :</strong> Gaspillage de 252 adresses IP pr√©cieuses</p>
                    <p><strong>Solution :</strong> Utiliser /30 (4 adresses) ou /31 (2 adresses) pour les liaisons point-√†-point</p>
                </div>

                <div class="term-definition">
                    <h4>üîÄ Routage Incorrect</h4>
                    <p><strong>Sc√©nario :</strong> Oubli de configurer les routes entre sous-r√©seaux diff√©rents</p>
                    <p><strong>Probl√®me :</strong> Impossibilit√© de communication entre les segments r√©seau</p>
                    <p><strong>Solution :</strong> Configurer correctement le routage statique ou utiliser un protocole de routage dynamique</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        let subnetCount = 3;

        // Fonctions pour afficher/masquer les solutions et indices
        function showSolution(solutionId) {
            const solution = document.getElementById(solutionId);
            solution.style.display = solution.style.display === 'block' ? 'none' : 'block';
        }

        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
        }

        // V√©rification de l'exercice subnetting
        function checkSubnetExercise() {
            const siteA = document.getElementById('siteA').value.trim();
            const siteB = document.getElementById('siteB').value.trim();
            const siteC = document.getElementById('siteC').value.trim();
            
            // Solutions acceptables (avec diff√©rentes notations)
            const solutionsA = ['172.16.0.0/23', '172.16.0.0/255.255.254.0'];
            const solutionsB = ['172.16.2.0/24', '172.16.2.0/255.255.255.0'];
            const solutionsC = ['172.16.3.0/26', '172.16.3.0/255.255.255.192'];
            
            let correct = 0;
            let feedback = "";
            
            if (solutionsA.includes(siteA)) {
                correct++;
                document.getElementById('siteA').style.borderColor = '#27ae60';
            } else {
                document.getElementById('siteA').style.borderColor = '#e74c3c';
                feedback += "Site A incorrect. Attendu: 172.16.0.0/23\n";
            }
            
            if (solutionsB.includes(siteB)) {
                correct++;
                document.getElementById('siteB').style.borderColor = '#27ae60';
            } else {
                document.getElementById('siteB').style.borderColor = '#e74c3c';
                feedback += "Site B incorrect. Attendu: 172.16.2.0/24\n";
            }
            
            if (solutionsC.includes(siteC)) {
                correct++;
                document.getElementById('siteC').style.borderColor = '#27ae60';
            } else {
                document.getElementById('siteC').style.borderColor = '#e74c3c';
                feedback += "Site C incorrect. Attendu: 172.16.3.0/26\n";
            }
            
            if (correct === 3) {
                alert('‚úÖ Excellent ! Tous les sous-r√©seaux sont corrects !');
                showSolution('subnetSolution');
            } else {
                alert(`‚ùå ${correct}/3 corrects.\n\n${feedback}\nUtilisez l'aide m√©moire pour vous guider.`);
                showHint('subnetHint');
            }
        }

        // Calculateur VLSM
        function calculateVLSM() {
            const network = document.getElementById('vlsmNetwork').value;
            const mask = parseInt(document.getElementById('vlsmMask').value);
            
            // Validation de l'adresse r√©seau
            if (!isValidIP(network)) {
                alert('‚ùå Adresse IP invalide. Utilisez le format XXX.XXX.XXX.XXX');
                return;
            }
            
            // R√©cup√©rer les sous-r√©seaux
            const subnets = [];
            for (let i = 1; i <= subnetCount; i++) {
                const name = ["Direction", "Administration", "Production", "Service", "R&D", "Marketing"][i-1] || `Service ${i}`;
                const hosts = parseInt(document.getElementById(`subnetHosts${i}`).value);
                if (hosts && hosts > 0) {
                    subnets.push({ name, hosts });
                }
            }
            
            if (subnets.length === 0) {
                alert('‚ùå Veuillez sp√©cifier au moins un sous-r√©seau avec des h√¥tes.');
                return;
            }
            
            // Trier par taille d√©croissante (VLSM)
            subnets.sort((a, b) => b.hosts - a.hosts);
            
            let currentIP = ipToInt(network);
            const totalIPs = Math.pow(2, 32 - mask);
            let usedIPs = 0;
            
            let html = '<h4>üìä Plan d\'Adressage VLSM G√©n√©r√©</h4>';
            html += '<table class="subnet-table"><tr><th>Service</th><th>H√¥tes Demand√©s</th><th>Sous-r√©seau</th><th>Masque</th><th>H√¥tes Disponibles</th><th>Plage Utilisable</th><th>Broadcast</th></tr>';
            
            subnets.forEach(subnet => {
                const requiredSize = subnet.hosts + 2; // +2 pour r√©seau et broadcast
                const hostBits = Math.ceil(Math.log2(requiredSize));
                const newPrefix = 32 - hostBits;
                const subnetSize = Math.pow(2, hostBits);
                const usableHosts = subnetSize - 2;
                
                // V√©rifier si on d√©passe l'espace disponible
                if (usedIPs + subnetSize > totalIPs) {
                    html += `<tr><td colspan="7" style="color: #e74c3c; text-align: center;">‚ùå Espace insuffisant pour ${subnet.name}</td></tr>`;
                    return;
                }
                
                const networkAddr = intToIp(currentIP);
                const firstUsable = intToIp(currentIP + 1);
                const lastUsable = intToIp(currentIP + subnetSize - 2);
                const broadcast = intToIp(currentIP + subnetSize - 1);
                
                html += `<tr>
                    <td><strong>${subnet.name}</strong></td>
                    <td>${subnet.hosts}</td>
                    <td>${networkAddr}</td>
                    <td>/${newPrefix}</td>
                    <td>${usableHosts}</td>
                    <td>${firstUsable} - ${lastUsable}</td>
                    <td>${broadcast}</td>
                </tr>`;
                
                currentIP += subnetSize;
                usedIPs += subnetSize;
            });
            
            html += '</table>';
            
            // Statistiques d'utilisation
            const utilization = ((usedIPs / totalIPs) * 100).toFixed(1);
            html += `<div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                <strong>üìà Statistiques :</strong> ${usedIPs}/${totalIPs} adresses utilis√©es (${utilization}%)
            </div>`;
            
            document.getElementById('vlsmResults').innerHTML = html;
        }

        // Ajouter un champ de sous-r√©seau
        function addSubnetField() {
            if (subnetCount >= 6) {
                alert('‚ùå Maximum 6 services autoris√©s pour cet exemple.');
                return;
            }
            
            subnetCount++;
            const lab = document.querySelector('.practice-lab');
            const buttonGroup = lab.querySelector('.button-group');
            
            const newField = document.createElement('div');
            newField.className = 'form-grid';
            newField.innerHTML = `
                <div class="input-group">
                    <label>Service ${subnetCount}</label>
                    <input type="number" id="subnetHosts${subnetCount}" value="10" min="1" max="1000">
                </div>
                <div class="input-group">
                    <label>&nbsp;</label>
                    <button class="btn" style="background: #95a5a6; color: white;" onclick="removeSubnetField(${subnetCount})">üóëÔ∏è Supprimer</button>
                </div>
            `;
            
            lab.insertBefore(newField, buttonGroup);
        }

        // Supprimer un champ de sous-r√©seau
        function removeSubnetField(id) {
            const field = document.querySelector(`[id="subnetHosts${id}"]`).parentElement.parentElement;
            field.remove();
        }

        // Fonctions utilitaires IP
        function ipToInt(ip) {
            return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) >>> 0;
        }

        function intToIp(int) {
            return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
        }

        function isValidIP(ip) {
            const parts = ip.split('.');
            if (parts.length !== 4) return false;
            return parts.every(part => {
                const num = parseInt(part);
                return num >= 0 && num <= 255 && part === num.toString();
            });
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Afficher un message de bienvenue
            setTimeout(() => {
                console.log('üöÄ Formation Subnetting charg√©e avec succ√®s !');
            }, 1000);
        });
    </script>
</body>
</html><!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation R√©seaux - Subnetting Am√©lior√©</title>
    <style>
        :root {
            --beginner: #4CAF50;
            --intermediate: #2196F3;
            --advanced: #FF9800;
            --expert: #F44336;
            --security: #9C27B0;
            --dark: #263238;
            --light: #F5F5F5;
            --border: #BDBDBD;
            --success: #388E3C;
            --warning: #FFA000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, var(--beginner) 0%, var(--expert) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .level-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0.2rem;
            color: white;
        }

        .intermediate { background: var(--intermediate); }

        .concept-card {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--beginner);
        }

        .step-by-step {
            background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--advanced);
        }

        .exercise {
            background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--success);
        }

        .practice-lab {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--warning);
        }

        .critical-case {
            background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--expert);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group label {
            font-weight: 600;
            color: var(--dark);
        }

        .input-group input, .input-group select, .input-group textarea {
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-intermediate { background: var(--intermediate); color: white; }
        .btn-advanced { background: var(--advanced); color: white; }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .calculation-steps {
            background: #E3F2FD;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .step {
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border-left: 4px solid var(--intermediate);
        }

        .subnet-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 1.5rem 0;
        }

        .subnet-table th, .subnet-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .subnet-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
        }

        .binary-visual {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            margin: 1rem 0;
            justify-content: center;
            background: #f0f0f0;
            padding: 1rem;
            border-radius: 8px;
        }

        .bit {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8rem;
            background: #e0e0e0;
            position: relative;
        }

        .bit.network { background: var(--beginner); color: white; }
        .bit.subnet { background: var(--intermediate); color: white; }
        .bit.host { background: var(--advanced); color: white; }

        .octet-separator {
            width: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #666;
        }

        .hint {
            background: #FFF3E0;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--warning);
            font-style: italic;
            display: none;
        }

        .solution {
            background: #E8F5E8;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--success);
            display: none;
        }

        .term-definition {
            background: #E1F5FE;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid var(--intermediate);
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            header h1 { font-size: 2rem; }
            .form-grid { grid-template-columns: 1fr; }
            .button-group { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .bit { width: 30px; height: 30px; font-size: 0.7rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîß Subnetting Avanc√© - Niveau Interm√©diaire</h1>
            <p>Division de r√©seaux IP avec exemples critiques et exercices pratiques</p>
        </header>

        <section>
            <h2>üéØ Principes du Sous-r√©seautage</h2>
            <span class="level-badge intermediate">Interm√©diaire</span>

            <div class="concept-card">
                <h3>üìö D√©finitions Essentielles</h3>
                
                <div class="term-definition">
                    <h4>üåê Sous-r√©seau (Subnet)</h4>
                    <p><strong>D√©finition:</strong> Division d'un r√©seau IP en plusieurs r√©seaux plus petits.</p>
                    <p><strong>Objectif:</strong> Optimiser l'adressage, am√©liorer la s√©curit√© et la gestion du trafic.</p>
                    <p><strong>Exemple critique:</strong> Dans une entreprise, s√©parer les services (Direction, RH, Production) pour isoler les probl√®mes et s√©curiser les acc√®s.</p>
                </div>

                <div class="term-definition">
                    <h4>üé≠ Masque de Sous-r√©seau</h4>
                    <p><strong>D√©finition:</strong> Valeur binaire qui d√©termine quelle partie d'une adresse IP identifie le r√©seau et quelle partie identifie l'h√¥te.</p>
                    <p><strong>Notation:</strong> /24 (CIDR) ou 255.255.255.0 (d√©cimal)</p>
                    <p><strong>Exemple critique:</strong> Un masque /26 signifie 26 bits pour le r√©seau, 6 bits pour les h√¥tes ‚Üí 64 adresses par sous-r√©seau.</p>
                </div>

                <div class="term-definition">
                    <h4>üî¢ Adresse de R√©seau</h4>
                    <p><strong>D√©finition:</strong> Premi√®re adresse d'un sous-r√©seau, utilis√©e pour identifier le r√©seau lui-m√™me.</p>
                    <p><strong>Caract√©ristique:</strong> Tous les bits h√¥tes √† 0.</p>
                    <p><strong>Exemple critique:</strong> 192.168.1.0/26 est l'adresse r√©seau du premier sous-r√©seau.</p>
                </div>

                <div class="term-definition">
                    <h4>üì¢ Adresse de Broadcast</h4>
                    <p><strong>D√©finition:</strong> Derni√®re adresse d'un sous-r√©seau, utilis√©e pour envoyer des donn√©es √† tous les h√¥tes du r√©seau.</p>
                    <p><strong>Caract√©ristique:</strong> Tous les bits h√¥tes √† 1.</p>
                    <p><strong>Exemple critique:</strong> 192.168.1.63/26 est l'adresse de broadcast du premier sous-r√©seau.</p>
                </div>

                <div class="term-definition">
                    <h4>üñ•Ô∏è Adresses Utilisables</h4>
                    <p><strong>D√©finition:</strong> Adresses IP pouvant √™tre assign√©es √† des √©quipements.</p>
                    <p><strong>Calcul:</strong> Total d'adresses - 2 (r√©seau + broadcast)</p>
                    <p><strong>Exemple critique:</strong> Pour un /26 (64 adresses), 62 adresses sont utilisables.</p>
                </div>
            </div>

            <div class="step-by-step">
                <h3>üìñ Exemple Pas √† Pas: Division d'un /24 en 4 sous-r√©seaux</h3>
                <p><strong>R√©seau original:</strong> 192.168.1.0/24</p>
                
                <div class="calculation-steps">
                    <div class="step">
                        <strong>√âtape 1: D√©terminer le nombre de bits n√©cessaires</strong><br>
                        Pour 4 sous-r√©seaux: 2¬≤ = 4 ‚Üí 2 bits suppl√©mentaires
                    </div>
                    <div class="step">
                        <strong>√âtape 2: Calculer le nouveau masque</strong><br>
                        Masque original: /24 + 2 bits = /26<br>
                        Nouveau masque: 255.255.255.192
                    </div>
                    <div class="step">
                        <strong>√âtape 3: Calculer la taille des sous-r√©seaux</strong><br>
                        Bits h√¥te: 32 - 26 = 6 bits<br>
                        Adresses par sous-r√©seau: 2‚Å∂ = 64 adresses
                    </div>
                    <div class="step">
                        <strong>√âtape 4: D√©terminer les sous-r√©seaux</strong><br>
                        Incr√©ment: 256 - 192 = 64
                    </div>
                </div>

                <table class="subnet-table">
                    <thead>
                        <tr>
                            <th>Sous-r√©seau</th>
                            <th>Adresse R√©seau</th>
                            <th>Plage Utilisable</th>
                            <th>Broadcast</th>
                            <th>Masque</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>192.168.1.0</td>
                            <td>192.168.1.1 - 192.168.1.62</td>
                            <td>192.168.1.63</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>192.168.1.64</td>
                            <td>192.168.1.65 - 192.168.1.126</td>
                            <td>192.168.1.127</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>192.168.1.128</td>
                            <td>192.168.1.129 - 192.168.1.190</td>
                            <td>192.168.1.191</td>
                            <td>/26</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>192.168.1.192</td>
                            <td>192.168.1.193 - 192.168.1.254</td>
                            <td>192.168.1.255</td>
                            <td>/26</td>
                        </tr>
                    </tbody>
                </table>

                <div class="binary-visual">
                    <!-- Visualisation des bits pour /26 -->
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    <div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N</div><div class="bit network">N">
                    <div class="bit subnet">S</div><div class="bit subnet">S</div><div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H</div><div class="bit host">H">
                </div>
                <p><em>N=Network (24 bits) | S=Subnet (2 bits) | H=Host (6 bits)</em></p>
            </div>

            <div class="exercise">
                <h3>üí™ Exercice 1: Calcul de Sous-r√©seaux avec Contraintes</h3>
                <p>√Ä partir du r√©seau 172.16.0.0/16, cr√©ez des sous-r√©seaux pour:</p>
                <ul>
                    <li>Site A: 500 h√¥tes</li>
                    <li>Site B: 200 h√¥tes</li>
                    <li>Site C: 50 h√¥tes</li>
                    <li>Liaisons WAN: 10 sous-r√©seaux de 2 h√¥tes</li>
                </ul>

                <div class="form-grid">
                    <div class="input-group">
                        <label>Site A - Sous-r√©seau (500 h√¥tes)</label>
                        <input type="text" id="siteA" placeholder="172.16.0.0/?">
                    </div>
                    <div class="input-group">
                        <label>Site B - Sous-r√©seau (200 h√¥tes)</label>
                        <input type="text" id="siteB" placeholder="172.16.?.0/?">
                    </div>
                    <div class="input-group">
                        <label>Site C - Sous-r√©seau (50 h√¥tes)</label>
                        <input type="text" id="siteC" placeholder="172.16.?.0/?">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-intermediate" onclick="checkSubnetExercise()">
                        ‚úÖ V√©rifier la Solution
                    </button>
                    <button class="btn btn-advanced" onclick="showHint('subnetHint')">
                        üí° Aide M√©moire
                    </button>
                </div>

                <div id="subnetHint" class="hint">
                    <strong>Indice:</strong> 
                    <ul>
                        <li>Site A (500 h√¥tes): 512 adresses n√©cessaires (2‚Åπ) ‚Üí /23</li>
                        <li>Site B (200 h√¥tes): 256 adresses n√©cessaires (2‚Å∏) ‚Üí /24</li>
                        <li>Site C (50 h√¥tes): 64 adresses n√©cessaires (2‚Å∂) ‚Üí /26</li>
                        <li>Liaisons WAN (2 h√¥tes): 4 adresses n√©cessaires (2¬≤) ‚Üí /30</li>
                    </ul>
                </div>

                <div id="subnetSolution" class="solution">
                    <h4>‚úÖ Solution Compl√®te:</h4>
                    <table class="subnet-table">
                        <thead>
                            <tr>
                                <th>Site</th>
                                <th>H√¥tes requis</th>
                                <th>Sous-r√©seau</th>
                                <th>Masque</th>
                                <th>Plage Utilisable</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Site A</td>
                                <td>500</td>
                                <td>172.16.0.0/23</td>
                                <td>255.255.254.0</td>
                                <td>172.16.0.1 - 172.16.1.254</td>
                            </tr>
                            <tr>
                                <td>Site B</td>
                                <td>200</td>
                                <td>172.16.2.0/24</td>
                                <td>255.255.255.0</td>
                                <td>172.16.2.1 - 172.16.2.254</td>
                            </tr>
                            <tr>
                                <td>Site C</td>
                                <td>50</td>
                                <td>172.16.3.0/26</td>
                                <td>255.255.255.192</td>
                                <td>172.16.3.1 - 172.16.3.62</td>
                            </tr>
                            <tr>
                                <td>Liaison WAN 1</td>
                                <td>2</td>
                                <td>172.16.3.64/30</td>
                                <td>255.255.255.252</td>
                                <td>172.16.3.65 - 172.16.3.66</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="practice-lab">
                <h3>üî¨ Laboratoire: Calculateur VLSM Interactif</h3>
                <p>Le VLSM (Variable Length Subnet Mask) permet d'optimiser l'adressage en utilisant des masques de longueur variable.</p>
                
                <div class="form-grid">
                    <div class="input-group">
                        <label>R√©seau principal</label>
                        <input type="text" id="vlsmNetwork" value="192.168.0.0" placeholder="192.168.0.0">
                    </div>
                    <div class="input-group">
                        <label>Masque initial</label>
                        <select id="vlsmMask">
                            <option value="16">/16</option>
                            <option value="24" selected>/24</option>
                            <option value="22">/22</option>
                        </select>
                    </div>
                </div>

                <h4>Besoins en sous-r√©seaux:</h4>
                <div class="form-grid">
                    <div class="input-group">
                        <label>Nom du sous-r√©seau</label>
                        <input type="text" id="subnetName1" value="Direction" placeholder="Direction">
                    </div>
                    <div class="input-group">
                        <label>Nombre d'h√¥tes</label>
                        <input type="number" id="subnetHosts1" value="30" min="1">
                    </div>
                </div>

                <div class="form-grid">
                    <div class="input-group">
                        <label>Nom du sous-r√©seau</label>
                        <input type="text" id="subnetName2" value="Administration" placeholder="Administration">
                    </div>
                    <div class="input-group">
                        <label>Nombre d'h√¥tes</label>
                        <input type="number" id="subnetHosts2" value="60" min="1">
                    </div>
                </div>

                <div class="form-grid">
                    <div class="input-group">
                        <label>Nom du sous-r√©seau</label>
                        <input type="text" id="subnetName3" value="Production" placeholder="Production">
                    </div>
                    <div class="input-group">
                        <label>Nombre d'h√¥tes</label>
                        <input type="number" id="subnetHosts3" value="120" min="1">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-advanced" onclick="calculateVLSM()">
                        üßÆ Calculer VLSM
                    </button>
                    <button class="btn btn-intermediate" onclick="addSubnetField()">
                        ‚ûï Ajouter un Sous-r√©seau
                    </button>
                </div>

                <div id="vlsmResults"></div>
            </div>

            <div class="critical-case">
                <h3>‚ö†Ô∏è Cas Critique: Probl√®mes Courants de Subnetting</h3>
                
                <div class="term-definition">
                    <h4>üö´ Erreur: Sous-r√©seaux qui se chevauchent</h4>
                    <p><strong>Sc√©nario:</strong> Configuration de 192.168.1.0/26 et 192.168.1.64/25</p>
                    <p><strong>Probl√®me:</strong> Les plages d'adresses se chevauchent, causant des conflits IP.</p>
                    <p><strong>Solution:</strong> Toujours v√©rifier que les sous-r√©seaux sont disjoints.</p>
                </div>

                <div class="term-definition">
                    <h4>üìâ Erreur: Sous-dimensionnement</h4>
                    <p><strong>Sc√©nario:</strong> Attribution d'un /29 (6 h√¥tes) √† un service qui en n√©cessite 10.</p>
                    <p><strong>Probl√®me:</strong> Manque d'adresses IP disponibles.</p>
                    <p><strong>Solution:</strong> Pr√©voir une marge de croissance et utiliser VLSM.</p>
                </div>

                <div class="term-definition">
                    <h4>üìà Erreur: Surdimensionnement</h4>
                    <p><strong>Sc√©nario:</strong> Attribution d'un /24 (254 h√¥tes) √† une liaison WAN de 2 routeurs.</p>
                    <p><strong>Probl√®me:</strong> Gaspillage d'adresses IP pr√©cieuses.</p>
                    <p><strong>Solution:</strong> Utiliser des masques adapt√©s √† la taille r√©elle des r√©seaux.</p>
                </div>

                <div class="term-definition">
                    <h4>üîÄ Erreur: Routage incorrect</h4>
                    <p><strong>Sc√©nario:</strong> Oubli de configurer les routes entre sous-r√©seaux.</p>
                    <p><strong>Probl√®me:</strong> Impossibilit√© de communication entre sous-r√©seaux.</p>
                    <p><strong>Solution:</strong> Configurer correctement le routage statique ou dynamique.</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        let subnetCount = 3;

        // Fonctions pour afficher/masquer les solutions et indices
        function showSolution(solutionId) {
            const solution = document.getElementById(solutionId);
            solution.style.display = solution.style.display === 'block' ? 'none' : 'block';
        }

        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
        }

        // V√©rification de l'exercice subnetting
        function checkSubnetExercise() {
            const siteA = document.getElementById('siteA').value;
            const siteB = document.getElementById('siteB').value;
            const siteC = document.getElementById('siteC').value;
            
            // Solutions attendues
            const solutions = [
                '172.16.0.0/23',
                '172.16.2.0/24',
                '172.16.3.0/26'
            ];
            
            const userInputs = [siteA, siteB, siteC];
            let correct = 0;
            
            userInputs.forEach((input, index) => {
                if (input.includes(solutions[index])) {
                    correct++;
                }
            });
            
            if (correct === 3) {
                alert('‚úÖ Excellent! Subnetting parfait!');
                showSolution('subnetSolution');
            } else {
                alert(`‚ùå ${correct}/3 corrects. Utilisez l'aide m√©moire.`);
                showHint('subnetHint');
            }
        }

        // Calculateur VLSM
        function calculateVLSM() {
            const network = document.getElementById('vlsmNetwork').value;
            const mask = parseInt(document.getElementById('vlsmMask').value);
            
            // R√©cup√©rer les sous-r√©seaux
            const subnets = [];
            for (let i = 1; i <= subnetCount; i++) {
                const name = document.getElementById(`subnetName${i}`).value;
                const hosts = parseInt(document.getElementById(`subnetHosts${i}`).value);
                if (name && hosts) {
                    subnets.push({ name, hosts });
                }
            }
            
            // Trier par taille d√©croissante (VLSM)
            subnets.sort((a, b) => b.hosts - a.hosts);
            
            let currentIP = ipToInt(network);
            let html = '<h4>üìä Plan d\'Adressage VLSM:</h4><table class="subnet-table"><tr><th>Sous-r√©seau</th><th>H√¥tes Demand√©s</th><th>Adresse R√©seau</th><th>Masque</th><th>H√¥tes Disponibles</th><th>Plage Utilisable</th></tr>';
            
            subnets.forEach(subnet => {
                const requiredSize = subnet.hosts + 2; // +2 pour r√©seau et broadcast
                const hostBits = Math.ceil(Math.log2(requiredSize));
                const newPrefix = 32 - hostBits;
                const subnetSize = Math.pow(2, hostBits);
                const usableHosts = subnetSize - 2;
                
                const networkAddr = intToIp(currentIP);
                const firstUsable = intToIp(currentIP + 1);
                const lastUsable = intToIp(currentIP + subnetSize - 2);
                const broadcast = intToIp(currentIP + subnetSize - 1);
                
                html += `<tr>
                    <td>${subnet.name}</td>
                    <td>${subnet.hosts}</td>
                    <td>${networkAddr}</td>
                    <td>/${newPrefix}</td>
                    <td>${usableHosts}</td>
                    <td>${firstUsable} - ${lastUsable}</td>
                </tr>`;
                
                currentIP += subnetSize;
            });
            
            html += '</table>';
            document.getElementById('vlsmResults').innerHTML = html;
        }

        // Ajouter un champ de sous-r√©seau
        function addSubnetField() {
            subnetCount++;
            const lab = document.querySelector('.practice-lab');
            const buttonGroup = lab.querySelector('.button-group');
            
            const newField = document.createElement('div');
            newField.className = 'form-grid';
            newField.innerHTML = `
                <div class="input-group">
                    <label>Nom du sous-r√©seau</label>
                    <input type="text" id="subnetName${subnetCount}" placeholder="Nouveau sous-r√©seau">
                </div>
                <div class="input-group">
                    <label>Nombre d'h√¥tes</label>
                    <input type="number" id="subnetHosts${subnetCount}" value="10" min="1">
                </div>
            `;
            
            lab.insertBefore(newField, buttonGroup);
        }

        // Fonctions utilitaires IP
        function ipToInt(ip) {
            return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) >>> 0;
        }

        function intToIp(int) {
            return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
        }
    </script>
</body>
</html>
