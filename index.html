<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formation R√©seaux ‚Äî Plateforme p√©dagogique</title>
  <meta name="description" content="Cours, labs, exercices auto-corrig√©s et mini-simulateur pour l'administration r√©seau et s√©curit√©." />
  <style>
    :root{--bg:#f5f7fa;--card:#fff;--muted:#6b7280;--accent:#0f6fd6;--ok:#16a34a}
    *{box-sizing:border-box}body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:var(--bg);color:#111}
    .wrap{max-width:1100px;margin:20px auto;padding:18px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px}
    h1{margin:0;font-size:1.4rem}
    .hero{background:linear-gradient(90deg,rgba(15,111,214,0.08),#fff);padding:18px;border-radius:12px;display:flex;justify-content:space-between;align-items:center}
    .card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.06);margin-top:12px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:12px}
    input,select,textarea,button{font:inherit}
    input[type=text],input[type=number],textarea,select{width:100%;padding:8px;border:1px solid #e6eefb;border-radius:8px}
    button.primary{background:var(--accent);color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer}
    pre.cfg{background:#0b1220;color:#e6eefb;padding:10px;border-radius:8px;overflow:auto}
    .mini{color:var(--muted);font-size:0.9rem}
    nav a{margin-right:12px;color:var(--accent);text-decoration:none}
    .solution{display:none;border-left:4px solid var(--ok);background:#f6fff6;padding:8px;border-radius:6px;margin-top:8px}
    .kbd{background:#111827;color:#fff;padding:3px 6px;border-radius:6px;font-size:0.85rem}
    @media(max-width:900px){.grid{grid-template-columns:1fr}header{flex-direction:column;align-items:flex-start}}
    /* print */
    @media print{button,nav,.no-print{display:none} .solution{display:block}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Formation R√©seaux ‚Äî Administration & S√©curit√©</h1>
        <div class="mini">Plateforme p√©dagogique : cours, labs r√©els, exercices auto-corrig√©s.</div>
      </div>
      <div style="text-align:right">
        <div class="mini">Niveau : D√©butant ‚Üí Expert</div>
        <div style="margin-top:8px"><button class="primary" onclick="window.print()">üìÑ Imprimer / Exporter</button></div>
      </div>
    </header>

    <section class="hero card">
      <div>
        <h2 style="margin:0">Programme complet ‚Äî Subnetting, Routage, S√©curit√©</h2>
        <div class="mini" style="margin-top:6px">Exemples r√©els, templates, simulateur et suivi √©tudiant.</div>
      </div>
      <div style="width:260px;text-align:right">
        <div class="mini">Progression locale</div>
        <div style="margin-top:8px"><span id="progressBox" class="mini">0%</span></div>
      </div>
    </section>

    <nav class="card no-print" style="display:flex;gap:8px;flex-wrap:wrap">
      <a href="#docs">Docs</a><a href="#labs">Labs</a><a href="#exos">Exercices</a><a href="#mini-tracer">Simulateur</a><a href="#quiz-module">Quiz</a><a href="#dashboard">Dashboard</a>
    </nav>

    <!-- Documentation -->
    <section id="docs" class="card">
      <h3>üìò Cours & Documentation d√©taill√©e</h3>
      <p class="mini">Explications pas √† pas, commandes, et cas r√©els.</p>

      <h4>Mod√®le OSI & TCP/IP</h4>
      <p>Comprendre les couches aide √† diagnostiquer : Physique ‚Üí Liaison ‚Üí R√©seau ‚Üí Transport ‚Üí Application.</p>

      <h4>Subnetting ‚Äî m√©thode</h4>
      <ol>
        <li>Identifier la plage d'origine (ex: 10.0.0.0/16)</li>
        <li>D√©finir besoins par service (ex: 200 h√¥tes pour RH)</li>
        <li>Choisir pr√©fixe adapt√© (calcul : 2‚Åø - 2 ‚â• h√¥tes)</li>
        <li>Calculer addresses network/first/last/broadcast</li>
      </ol>

      <h4>Exemple r√©el</h4>
      <div class="mini">Cas : soci√©t√© 3 d√©partements ‚Äî VLANs, SVI, ACLs ‚Äî voir labs.</div>
    </section>

    <!-- Labs r√©els -->
    <section id="labs" class="card">
      <h3>üè≠ Labs & Sc√©narios en entreprise</h3>
      <p class="mini">√âtapes, extraits de configuration, exercices pratiques.</p>

      <div class="grid">
        <div>
          <h4>Lab ‚Äî VLAN multi-d√©partement</h4>
          <p class="mini">Objectif : segmenter pour Admin, R&D, Guest.</p>
          <ol>
            <li>VLAN10 Admin ‚Üí 10.10.10.0/24</li>
            <li>VLAN20 R&D ‚Üí 10.10.20.0/24</li>
            <li>VLAN30 Guest ‚Üí 10.10.30.0/24</li>
            <li>SVI sur switch L3 ou Router-on-a-stick + ACL</li>
          </ol>
          <pre class="cfg">interface Vlan10
 ip address 10.10.10.1 255.255.255.0
!
ip access-list extended GUEST_TO_ADMIN
 deny ip 10.10.30.0 0.0.0.255 10.10.10.0 0.0.0.255
 permit ip any any</pre>

          <p class="mini">Exercice : √©crire l'ACL qui autorise le web mais bloque acc√®s Admin depuis Guest.</p>
          <textarea id="lab1ans" placeholder="Tape ta config ici..." rows="4" style="width:100%"></textarea>
          <div style="margin-top:8px"><button class="primary" id="lab1check">V√©rifier</button></div>
          <div id="lab1res" class="solution">Solution exemple:<pre class="cfg">ip access-list extended GUEST_TO_ADMIN
 deny ip 10.10.30.0 0.0.0.255 10.10.10.0 0.0.0.255
 permit tcp any any eq 80
 permit tcp any any eq 443
 deny ip any any</pre></div>
        </div>

        <aside>
          <div class="card">
            <h4>Conseils</h4>
            <ul class="mini">
              <li>Documente VLAN/ports.</li>
              <li>Teste inter-VLAN par ping.</li>
              <li>Pr√©vois rollback plan.</li>
            </ul>
          </div>
        </aside>
      </div>
    </section>

    <!-- Exercices auto -->
    <section id="exos" class="card">
      <h3>üìù Exercices auto-corrig√©s</h3>
      <p class="mini">Subnetting, VLSM, QCM et g√©n√©rateur d'exos.</p>

      <h4>Calcul VLSM (entr√©es s√©par√©es par virgule)</h4>
      <label>R√©seau de base</label><input id="vlsmNet" value="192.168.0.0">
      <label>Pr√©fixe</label><input id="vlsmPrefix" type="number" value="24">
      <label>Besoins (h√¥tes)</label><input id="vlsmNeeds" value="60,30,12">
      <div style="margin-top:8px" class="flex"><button class="primary" id="calcVlsm">Calculer</button></div>
      <div id="vlsmOut" style="margin-top:10px"></div>
    </section>

    <!-- Mini Packet-Tracer -->
    <section id="mini-tracer" class="card">
      <h3>üß© Mini-simulateur (Packet-Tracer minimal)</h3>
      <div class="grid">
        <div>
          <label>Ajouter h√¥te (IP)</label><input id="ptIp">
          <div style="margin-top:8px" class="flex">
            <button class="primary" id="ptAdd">Ajouter</button>
            <button class="primary" id="ptClear">R√©initialiser</button>
          </div>
          <label style="margin-top:8px">Connecter (src-dst)</label><input id="ptLink" placeholder="10.0.0.2-10.0.0.3">
          <div style="margin-top:8px" class="flex"><button class="primary" id="ptLinkBtn">Connecter</button></div>
          <label style="margin-top:8px">Ping (src dest)</label><input id="ptPing" placeholder="10.0.0.2 10.0.0.3">
          <div style="margin-top:8px" class="flex"><button class="primary" id="ptPingBtn">Ping</button></div>
        </div>
        <div>
          <h4>Topologie</h4>
          <pre id="ptOut" class="cfg">(aucun h√¥te)</pre>
        </div>
      </div>
    </section>

    <!-- Quiz -->
    <section id="quiz-module" class="card">
      <h3>üß† Quiz</h3>
      <div id="quizArea"><div class="mini">Cliquez sur D√©marrer</div></div>
      <div style="margin-top:8px" class="flex">
        <button class="primary" id="startQuiz">D√©marrer</button>
        <button class="primary" id="submitQuiz">Soumettre</button>
      </div>
      <div id="quizResult" class="mini" style="margin-top:8px"></div>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="card">
      <h3>üìä Dashboard (local)</h3>
      <div class="grid">
        <div>
          <label>Nom d'utilisateur</label><input id="userName">
          <div style="margin-top:8px" class="flex"><button class="primary" id="loginBtn">Se connecter</button><button id="logoutBtn" class="tab-btn">Se d√©connecter</button></div>
          <div id="userInfo" class="mini" style="margin-top:8px">Aucun utilisateur</div>
        </div>
        <div>
          <h4>Progression</h4>
          <div id="userProgress" class="mini">‚Äî</div>
          <div style="margin-top:8px"><button class="primary" id="resetBtn">R√©initialiser</button></div>
        </div>
      </div>
    </section>

    <footer class="mini" style="margin-top:18px;text-align:center">Fichier g√©n√©r√© automatiquement ‚Äî package ZIP pr√™t √† d√©ployer.</footer>
  </div>

<script>
/* Utility IP conversions */
function ipToInt(ip){ return ip.split('.').reduce((a,b)=> (a<<8)+parseInt(b,10),0)>>>0 }
function intToIp(i){ return [(i>>>24)&255,(i>>>16)&255,(i>>>8)&255,i&255].join('.') }

/* VLSM calculator */
document.getElementById('calcVlsm').addEventListener('click', ()=>{
  const net=document.getElementById('vlsmNet').value.trim();
  const prefix=parseInt(document.getElementById('vlsmPrefix').value,10);
  const needs=document.getElementById('vlsmNeeds').value.split(',').map(s=>parseInt(s.trim())).filter(n=>!isNaN(n)).sort((a,b)=>b-a);
  if(!net||isNaN(prefix)||needs.length===0){ alert('Remplis les champs'); return }
  let cur = ipToInt(net);
  let out = '<table style="width:100%;border-collapse:collapse"><tr><th>Subnet</th><th>H√¥tes</th><th>Network</th><th>Prefix</th><th>Range</th></tr>';
  needs.forEach((need,i)=>{
    const needTotal = need+2;
    const hostBits = Math.ceil(Math.log2(needTotal));
    const newPrefix = 32 - hostBits;
    const size = Math.pow(2, hostBits);
    const netAddr = intToIp(cur);
    const bcast = intToIp(cur + size -1);
    const first = intToIp(cur+1);
    const last = intToIp(cur+size-2);
    out += `<tr><td>R${i+1}</td><td>${need}</td><td>${netAddr}</td><td>/${newPrefix}</td><td>${first} - ${last} (bcast ${bcast})</td></tr>`;
    cur += size;
  });
  out += '</table>';
  document.getElementById('vlsmOut').innerHTML = out;
});

/* Lab 1 check simple */
document.getElementById('lab1check').addEventListener('click', ()=>{
  const t=document.getElementById('lab1ans').value;
  const ok = /deny ip 10\.10\.30\.0.*10\.10\.10\.0/.test(t) && /permit tcp .* eq 80/.test(t);
  document.getElementById('lab1res').style.display='block';
  alert(ok? 'Bonne r√©ponse (valid√©e)':'R√©ponse incompl√®te ‚Äî v√©rifie l'ACL');
});

/* Mini Packet-Tracer */
const PT = {nodes:{}, links:[]};
function refreshPT(){ let s=''; Object.keys(PT.nodes).forEach(ip=> s+=ip+'\n'); s+='\nLinks:\n'; PT.links.forEach(l=> s+=l.a+' <-> '+l.b+'\n'); document.getElementById('ptOut').textContent = s || '(vide)'; }
document.getElementById('ptAdd').addEventListener('click', ()=>{
  const ip=document.getElementById('ptIp').value.trim(); if(!ip) return alert('IP requise'); PT.nodes[ip]={ip}; document.getElementById('ptIp').value=''; refreshPT();
});
document.getElementById('ptClear').addEventListener('click', ()=>{ PT.nodes={}; PT.links=[]; refreshPT(); });
document.getElementById('ptLinkBtn').addEventListener('click', ()=>{
  const v=document.getElementById('ptLink').value.split('-').map(s=>s.trim()); if(v.length!==2) return alert('format src-dst'); if(!PT.nodes[v[0]]||!PT.nodes[v[1]]) return alert('h√¥te inconnu'); PT.links.push({a:v[0],b:v[1]}); document.getElementById('ptLink').value=''; refreshPT();
});
document.getElementById('ptPingBtn').addEventListener('click', ()=>{
  const v=document.getElementById('ptPing').value.split(' ').map(s=>s.trim()); if(v.length!==2) return alert('format src dest'); const src=v[0], dst=v[1];
  const q=[src]; const seen=new Set(); let found=false;
  while(q.length){ const cur=q.shift(); if(cur===dst){found=true;break;} seen.add(cur); PT.links.forEach(l=>{ if(l.a===cur && !seen.has(l.b)) q.push(l.b); if(l.b===cur && !seen.has(l.a)) q.push(l.a); }); }
  alert(found? 'Ping OK':'Destination inaccessible');
});

/* Quiz */
const QUIZ = [
  {q:'Quel protocole r√©sout une adresse MAC depuis une IP ?', a:['ARP','DNS','BGP','OSPF'], correct:0},
  {q:'Quel masque pour ~254 h√¥tes ?', a:['/24','/25','/23','/26'], correct:0},
  {q:'OSPF est quel type de protocole ?', a:['Distance-vector','Link-state','Application','Transport'], correct:1}
];
document.getElementById('startQuiz').addEventListener('click', ()=>{
  const area=document.getElementById('quizArea'); area.innerHTML=''; QUIZ.forEach((it,i)=>{ const div=document.createElement('div'); div.className='card'; let html='<p><strong>Q'+(i+1)+'</strong> '+it.q+'</p>'; it.a.forEach((op,j)=> html+=`<div><input type="radio" name="q${i}" value="${j}" id="q${i}_${j}"><label for="q${i}_${j}"> ${op}</label></div>`); div.innerHTML=html; area.appendChild(div); });
});
document.getElementById('submitQuiz').addEventListener('click', ()=>{
  let score=0; QUIZ.forEach((it,i)=>{ const sel=document.querySelector(`input[name="q${i}"]:checked`); if(sel && parseInt(sel.value)===it.correct) score++; });
  const name = localStorage.getItem('fr_current_user')||'guest';
  const users = JSON.parse(localStorage.getItem('fr_users')||'{}'); if(!users[name]) users[name]={progress:0,badges:[],scores:[]};
  users[name].scores.push({date:Date.now(),score}); users[name].progress = Math.min(100,(users[name].progress||0)+score*5);
  if(score===QUIZ.length && !(users[name].badges||[]).includes('Quiz Master')) users[name].badges=(users[name].badges||[]).concat('Quiz Master');
  localStorage.setItem('fr_users', JSON.stringify(users));
  localStorage.setItem('fr_current_user', name);
  document.getElementById('quizResult').textContent = `Score: ${score}/${QUIZ.length} ‚Äî sauvegard√© pour ${name}`;
  document.getElementById('progressBox').textContent = users[name].progress+'%';
});

/* Dashboard (local users) */
function showUser(){
  const name = localStorage.getItem('fr_current_user'); document.getElementById('userInfo').textContent = name? 'Connect√©: '+name : 'Aucun utilisateur';
  const users = JSON.parse(localStorage.getItem('fr_users')||'{}'); if(name && users[name]) document.getElementById('userProgress').innerHTML = `Progression: ${users[name].progress||0}%<br>Badges: ${(users[name].badges||[]).join(', ')||'‚Äî'}`; else document.getElementById('userProgress').textContent='‚Äî';
  document.getElementById('progressBox').textContent = (name && users[name])? (users[name].progress||0)+'%':'0%';
}
document.getElementById('loginBtn').addEventListener('click', ()=>{
  const name=document.getElementById('userName').value.trim(); if(!name) return alert('Nom requis'); const users = JSON.parse(localStorage.getItem('fr_users')||'{}'); if(!users[name]) users[name]={progress:0,badges:[],scores:[]}; localStorage.setItem('fr_users', JSON.stringify(users)); localStorage.setItem('fr_current_user', name); showUser(); alert('Bienvenue '+name);
});
document.getElementById('logoutBtn').addEventListener('click', ()=>{ localStorage.removeItem('fr_current_user'); showUser(); });
document.getElementById('resetBtn').addEventListener('click', ()=>{ const name=localStorage.getItem('fr_current_user'); if(!name) return alert('Aucun utilisateur'); const users = JSON.parse(localStorage.getItem('fr_users')||'{}'); users[name].progress=0; users[name].badges=[]; localStorage.setItem('fr_users', JSON.stringify(users)); showUser(); });

/* init */
showUser();
</script>
</body>
</html>
